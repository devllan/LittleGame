"use strict";function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var cloudPlayer=window.cloudPlayer||{};cloudPlayer.Core=function(){var e={init:"CORE_EVENT_INIT",resize:"CORE_EVENT_RESIZE"},n=function(e,n){console.log("[CloudPlayer 1.8.2] "+e,n)},t=function(){document.getElementById("game-iframe").height=window.innerHeight,document.getElementById("game-iframe").width=window.innerWidth};return window.addEventListener("resize",function(){cloudPlayer.Events.fire(e.resize),t()}),{events:e,debug:!1,init:function(){n("initialize");var a="//wanted5games.com/game?distribution="+cloudPlayer.Utils.url.distribution()+(cloudPlayer.Utils.url.parameter("pub")?"&pub="+cloudPlayer.Utils.url.parameter("pub"):"");cloudPlayer.Utils.http.get(a,function(n){cloudPlayer.Core.config=n?JSON.parse(n):null,cloudPlayer.Events.fire(e.init)}),cloudPlayer.Layers.show(cloudPlayer.Layers.layers.splash),t()},log:n}}(),cloudPlayer.Utils=function(){var e={get:function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?n(t.responseText):n())},t.open("get",e,!0),t.send(null)}},n={parameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=n.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},distribution:function(){var e=window.location.pathname.replace(/\/$/,"").split("/"),n=e[e.length-1];return n.indexOf(".")>-1?e[e.length-2]:n}};return{device:{isMobile:function(){var e=!1;return function(n){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}},http:e,url:n}}(),cloudPlayer.Events=function(){var e={},n=function(n,t){e[n]||(e[n]=[]),e[n].push(t)},t=function(n,t){var a=e[n].indexOf(t);a>-1&&e[n].splice(a,1)};return{fire:function(n,t,a){if(t=t||{},a=a||window,e[n])for(var i=0;i<e[n].length;i++)e[n][i].call(a,t)},subscribe:n,unsubscribe:t,events:e}}(),cloudPlayer.Messages=function(){var e,n={received:"MESSAGES_EVENT_RECEIVED"},t=function(e,n){document.getElementById("game-iframe").contentWindow.postMessage("cloud://"+e+"/--/"+n,"*")},a=function(e,t){cloudPlayer.Events.fire(n.received,{message:e,data:t})};return e={init:function(){var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",function(e){var n=e.message?"message":"data",t=e[n];return t.mssg&&"deviceorientation"==t.mssg?void a("deviceorientation",t):t&&t.eventName?(a(t),void window.parent.postMessage(t,"*")):void(t.constructor==String&&(t.indexOf("ima://")<0&&window.parent!=window&&t.indexOf("action=")<0&&window.parent.postMessage(t,"*"),t.indexOf("cloud://")>-1&&(t=t.replace("cloud://","").split("/--/"),a(t[0],t[1])),t.indexOf("action=")>-1&&a(t)))},!1)},events:n},_defineProperty(e,"events",n),_defineProperty(e,"sendMessage",t),e}(),cloudPlayer.Layers=function(){return{layers:{splash:"splash",advertisement:"advertisment",game:"game"},show:function(e){switch(e){case"game":document.getElementById("advertisement").style.display="none",document.getElementById("game").style.display="block",document.getElementById("splash").style.display="none";break;case"advertisement":document.getElementById("advertisement").style.display="block",document.getElementById("game").style.display="none",document.getElementById("splash").style.display="none";break;case"splash":document.getElementById("advertisement").style.display="none",document.getElementById("game").style.display="none",document.getElementById("splash").style.display="flex"}}}}(),cloudPlayer.Origin=function(){return cloudPlayer.Events.subscribe(cloudPlayer.Core.events.init,function(){var e=cloudPlayer.Core.config;4!=cloudPlayer.Utils.url.parameter("pub")&&6!=cloudPlayer.Utils.url.parameter("pub")&&cloudPlayer.Utils.device.isIOS()&&229==e["game-id"]&&-1!=navigator.userAgent.indexOf("AppleWebKit")&&(document.domain="wanted5games.com",cloudPlayer.Utils.url.parameter("popup")||(document.getElementById("game-title").innerHTML=e["game-title"],document.getElementById("game-thumbnail").src=e["game-thumbnail"],document.getElementById("splash-play").addEventListener("click",function(){window.open(window.location.href+"&popup=1")}),cloudPlayer.Layers.show(cloudPlayer.Layers.layers.splash),cloudPlayer.Events.events.CORE_EVENT_INIT=[]))}),cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){console.log("origin",e),e.message&&"deviceorientation"==e.message&&document.getElementById("game-iframe").contentWindow.postMessage(e.data,"*")}),{}}(),cloudPlayer.Ads=function(){var e={init:"ADS_EVENT_INIT",finished:"ADS_EVENT_FINISHED",show:"ADS_EVENT_SHOW"},n=void 0,t=!1,a=function(){n.showAd()},i=function(){cloudPlayer.Events.fire(e.finished),cloudPlayer.Messages.sendMessage("GAME_UNMUTE",!1)},o=function(){cloudPlayer.Events.fire(e.init);var t=document.getElementById("outstreamContainer");try{n=new google.outstream.AdsController(t,a,i)}catch(e){cloudPlayer.Core.log(e)}},s=function(){return cloudPlayer.Utils.device.isMobile()&&!cloudPlayer.Core.config["ad-mobile-video"]?"image_text":"video_image_text"},r=function(){!t&&n&&(n.initialize(),t=!0)},l=function(){var e=cloudPlayer.Core.config,a=cloudPlayer.Core.debug;if(e["ad-system"]&&"wildtangent"==e["ad-system"])return void window.postMessage("event=pause_ready","*");if(!t)return void cloudPlayer.Layers.show(cloudPlayer.Layers.layers.splash);if(r(),e&&e["ad-unit-path"]&&n){var o="https://pubads.g.doubleclick.net/gampad/ads?ad_type="+s()+"&sz=300x250|400x300|640x480&iu="+e["ad-unit-path"]+"&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]"+(a?"&adtest=on":"");e["ad-system"]&&"sanoma"==e["ad-system"]&&(o=e["ad-vast"].replace("{random}",(new Date).getTime())),cloudPlayer.Layers.show("advertisement"),n.requestAds(o)}else i()};return cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){"AD_SHOW"==e.message&&(l(),e.data&&cloudPlayer.Analytics.ga("send","event","ad","show",JSON.parse(e.data).reason))}),cloudPlayer.Events.subscribe(cloudPlayer.Core.events.resize,function(){n&&n.resize(window.innerWidth,window.innerHeight)}),cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){"action=resume"==e.message&&i()}),cloudPlayer.Events.subscribe(cloudPlayer.Core.events.init,function(){var e=cloudPlayer.Core.config;document.getElementById("splash-play").addEventListener("click",function(){r(),l()}),document.getElementById("game-title").innerHTML=e["game-title"],document.getElementById("game-thumbnail").src=e["game-thumbnail"]}),cloudPlayer.Events.subscribe(cloudPlayer.Core.events.init,function(){var e=cloudPlayer.Core.config,n=window.location.pathname.indexOf("-iga-")>-1;void 0!==e["ad-preroll"]?e["ad-preroll"]&&n?l():i():n?l():i()}),{init:o,events:e}}(),cloudPlayer.Analytics=function(){return{ga:window.ga}}(),cloudPlayer.Ath=function(){var e=function(){try{var e=cloudPlayer.Utils.url.distribution(),n=cloudPlayer.Core.config,t=document.referrer.indexOf("wanted5games.com/en")>-1||document.referrer.indexOf("wanted5games.com/ar")>-1,a=document.referrer.indexOf("zibbo.com")>-1,i=e.indexOf("king-soldiers")>-1,o=e.indexOf("doodle-jump")>-1;cloudPlayer.Utils.device.isMobile()&&(t||a||i||o)&&(ga("send","event","ath","load",e),addToHomescreen({appID:"cloudgames.ath.game"+(n["game-id"]?n["game-id"]:""),displayPace:10,skipFirstVisit:!1,lifespan:30,onInit:function(){ga("send","event","ath","init",e)},onShow:function(){ga("send","event","ath","show",e)},onRemove:function(){ga("send","event","ath","remove",e)},onAdd:function(){ga("send","event","ath","add",e)},detectHomescreen:"queryString",logging:!0}))}catch(e){console.error("Error during ATH:",e)}};return cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(n){if("GAME_INIT"==n.message){JSON.parse(n.data).icons&&e()}}),{}}(),cloudPlayer.Main=function(){var e={startGame:"MAIN_EVENT_START_GAME"};cloudPlayer.Events.subscribe(cloudPlayer.Core.events.init,function(){var e=cloudPlayer.Core.config;document.title=e["game-title"]?e["game-title"]:cloudPlayer.Utils.url.distribution(),e||cloudPlayer.Events.fire(cloudPlayer.Main.events.startGame)}),cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){if("GAME_INIT"==e.message){var n=JSON.parse(e.data);if(n.icons)for(var t=0;t<n.icons.length;t++){var a=document.createElement("link");a.sizes=n.icons[t].sizes,a.href=n.icons[t].href,a.rel=n.icons[t].rel,document.head.appendChild(a)}}}),cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){var n=cloudPlayer.Core.config;"GAME_INIT"==e.message&&cloudPlayer.Messages.sendMessage("GAME_CONFIG",JSON.stringify({"ad-rotation":n["ad-rotation"],"ad-play":n["ad-play"],"ad-timer":n["ad-timer"],"links-active":n["links-active"],distribution:cloudPlayer.Utils.url.distribution(),portal:parseInt(cloudPlayer.Utils.url.parameter("pub")),"splash-color":n["splash-color"],"splash-image":n["splash-image"],"splash-link":n["splash-link"],logos:n.logos,"logos-active":n["logos-active"],links:{logo:!!n.links&&n.links.logo,splash:n["splash-link"],games:!!n.links&&n.links.games},"ad-system":n["ad-system"],plugins:n.plugins,scores:n.scores}))});var n=!1,t=function(){try{return window.self!==window.top}catch(e){return!0}},a=function(){if("cdn.casual-games.club"==window.location.hostname){if(!t())return;if("cdn.casual-games.club"!==window.location.hostname||-1===document.referrer.indexOf("casual-games.club"))return}document.getElementById("game-iframe").src="//cdn.wanted5games.com/games/"+cloudPlayer.Utils.url.distribution()+"/index.html"+location.search,n=!0,cloudPlayer.Analytics.ga("send","event","game","start",cloudPlayer.Utils.url.distribution())};return cloudPlayer.Events.subscribe(e.startGame,a),cloudPlayer.Events.subscribe(cloudPlayer.Ads.events.finished,function(){cloudPlayer.Layers.show(cloudPlayer.Layers.layers.game),n||a()}),cloudPlayer.Events.subscribe(cloudPlayer.Messages.events.received,function(e){"action=pause"==e.message&&cloudPlayer.Messages.sendMessage("GAME_MUTE"),"action=resume"==e.message&&cloudPlayer.Events.fire(cloudPlayer.Ads.events.finished)}),cloudPlayer.Core.init(),cloudPlayer.Messages.init(),cloudPlayer.Ads.init(),{events:e}}();
//# sourceMappingURL=player.js.map
