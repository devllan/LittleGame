var BootState={init:function(){game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.forceOrientation(!1,!1),game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.onSizeChange.add(this.onSizeChange,this),game.scale.setResizeCallback(this.onResize,this),game.input.maxPointers=1,game.stage.disableVisibilityChange=!1,R.canAudio=game.device.canPlayAudio("ogg")||game.device.canPlayAudio("mp3"),this.resizeGame()},preload:function(){game.load.atlas("play","assets/atlas_play.png","assets/atlas_play.json"),game.load.image("logo","assets/logo.png");var t=sgSettings.config.env.locale;game.load.json("strings","assets/text/"+t+".json")},create:function(){game.state.add("load",LoadState),game.state.add("home",HomeState),game.state.add("play",PlayState),new FontFaceObserver(R.fontName).load(null,5e3).then(function(){game.state.start("load")},this.fontLoadFailed)},fontLoadFailed:function(){R.fontName="Arial",game.state.start("load")},fullScreenHandler:function(){game.device.desktop},goFullScreen:function(){game.scale.isFullScreen||(game.scale.startFullScreen(),game.canvas.parentElement.style.backgroundColor="#0a2e02")},onResize:function(){var t=window.innerWidth,e=window.innerHeight;R.prevWindowWidth==t&&R.prevWindowHeight==e||this.onSizeChange();var i=document.getElementById(game.parent);i.style.width=t+"px",i.style.height=e+"px"},onSizeChange:function(){this.resizeGame(),game.state.resize(R.gameWidth,R.gameHeight)},resizeGame:function(){var t=window.innerWidth,e=window.innerHeight;R.prevWindowWidth=t,(R.prevWindowHeight=e)<t?(R.gameHeight=R.BASE_GAME_HEIGHT,R.gameWidth=R.gameHeight/e*t,R.gameWidth>R.MAX_GAME_WIDTH?R.gameWidth=R.MAX_GAME_WIDTH:R.gameWidth<R.BASE_GAME_WIDTH&&(R.gameWidth=R.BASE_GAME_WIDTH)):(R.gameWidth=R.BASE_GAME_HEIGHT,R.gameHeight=R.gameWidth/t*e,R.gameHeight>R.MAX_GAME_HEIGHT?R.gameHeight=R.MAX_GAME_HEIGHT:R.gameHeight<R.MIN_GAME_HEIGHT&&(R.gameHeight=R.MIN_GAME_HEIGHT)),R.halfGameWidth=.5*R.gameWidth,R.halfGameHeight=.5*R.gameHeight,game.scale.setGameSize(R.gameWidth,R.gameHeight)}};(R=R||{}).suits=["s","h","c","d"],R.values=["a","2","3","4","5","6","7","8","9","10","j","q","k"],R.complexity=1,R.wCard_H=134,R.hCard_H=190,R.xColumnDistance_H=10,R.wCard_V=90,R.hCard_V=128,R.xColumnDistance_V=5,R.wCard=0,R.hCard=0,R.xColumnDistance=0,R.hCardOffsetClose=12,R.hCardOffsetOpen=34,R.cardOffsetSqueeze=8,R.scaleCard=1,R.maxDistanceToBottomEdge=130,R.cardsHiddenN=0,R.cardShaking=null,R.cardShakeCount=0,R.cardShakeDir=0,R.cardShakeX0=0,R.adjustForMobile=function(){R.hCardOffsetOpen=50,R.maxDistanceToBottomEdge=140},R.adjustByOrientation=function(t,e){var i=e<t?"H":"V";R.wCard=R["wCard_"+i],R.hCard=R["hCard_"+i],R.xColumnDistance=R["xColumnDistance_"+i],R.scaleCard=R.wCard/R.wCard_H},R.centerAnchor=function(t){t.anchor.set(.5),t.x+=.5*t.width,t.y+=.5*t.height},R.defaultAnchor=function(t){t.anchor.set(0),t.column?(t.x=t.column.x,t.under?t.y=t.under.y+(t.under.isOpen?R.hCardOffsetOpen:R.hCardOffsetClose):t.y=t.column.y):(t.x-=.5*t.width,t.y-=.5*t.height),t.rotation=0},R.Card=function(t,e){Phaser.Image.call(this,game,0,0,R.currentSkin),this.isOpen=!1,this.under=null,this.over=null,this.column=null,this.tween=null,this.tween2=null,this.scored=!1,this.si=t,this.vi=e,this.name=R.values[e]+R.suits[t]},R.Card.prototype=Object.create(Phaser.Image.prototype),R.Card.prototype.constructor=R.Card,R.Card.prototype.setTween2Null=function(){this.tween2=null,this.rotation=0},R.Card.prototype.open=function(t,e){t&&--R.cardsHiddenN,this.isOpen=t,e?(R.centerAnchor(this),this.tween=game.add.tween(this.scale).to({x:.1*R.scaleCard,y:1.2*R.scaleCard},100,Phaser.Easing.Linear.None,!0),this.tween.onComplete.add(this.onOpenTweenComplete,this),this.scored||(PlayState.scoring(10,0),this.scored=!0)):this.loadTexture(t?this.name:R.currentSkin)},R.Card.prototype.onOpenTweenComplete=function(){this.loadTexture(this.isOpen?this.name:R.currentSkin),this.tween=game.add.tween(this.scale).to({x:R.scaleCard,y:R.scaleCard},100,Phaser.Easing.Linear.None,!0),this.tween.onComplete.add(function(){this.tween=null,R.defaultAnchor(this)},this)},R.Card.prototype.add=function(t,e){((t.under=this).over=t).makeTween(this.x,this.y+(this.isOpen?R.hCardOffsetOpen:R.hCardOffsetClose),e)},R.Card.prototype.makeTween=function(t,e,i){var s={x:t,y:e},n=Phaser.Point.distance(this,s)/3;n<1&&(n=1),this.tween=game.add.tween(this).to(s,n,Phaser.Easing.Linear.None,!0,i),this.tween.onComplete.add(function(){this.tween=null},this),this.over&&this.oversToChildren(),R.sfx.cardmove&&this.tween.onStart.add(function(){R.sfx.cardmove.play()},this),R.sfx.card&&this.tween.onComplete.add(function(){R.sfx.card.play()},this)},R.Card.prototype.oversToChildren=function(){for(var t=this.over,e=0,i=R.hCardOffsetOpen/R.scaleCard;t;)t.position.set(0,e+=i),t.scale.set(1),this.addChild(t),t=t.over;this.tween.onComplete.add(this.recoverOvers,this)},R.Card.prototype.recoverOvers=function(){for(var t=this.over;t;)game.world.add(t),t.scale.set(R.scaleCard),t=t.over;this.setPosition(this.x,this.y)},R.Card.prototype.setPosition=function(t,e){this.tween&&(this.bringToTop(),this.tween.stop(!0)),this.position.set(t,e);for(var i=this.over;i;)i.tween&&(i.bringToTop(),i.tween.stop(!0)),i.position.set(t,i.under.y+(i.under.isOpen?R.hCardOffsetOpen:R.hCardOffsetClose)),i=i.over},R.Card.prototype.setOnTop=function(){this.bringToTop();for(var t=this.over;t;)t.bringToTop(),t=t.over},R.Card.prototype.getBottomCard=function(){for(var t=this;t.over;)t=t.over;return t},R.Card.prototype.shake=function(){R.cardShaking=this,R.cardShakeCount=0,R.cardShakeDir=-1,R.cardShakeX0=this.x},R.Card.prototype.shaking=function(){this.x+=3*R.cardShakeDir,3<Math.abs(R.cardShakeX0-this.x)&&(R.cardShakeDir=-R.cardShakeDir,++R.cardShakeCount),4<R.cardShakeCount?this.stopShaking():this.setPosition(this.x,this.y)},R.Card.prototype.stopShaking=function(){R.cardShaking=null,this.setPosition(R.cardShakeX0,this.y)},R.Column=function(){Phaser.Image.call(this,game,0,0,null),this.bottomCard=null,this.topCard=null,this.squeezed=!1,this.rown=0,this.untilRown=0,game.world.add(this)},R.Column.prototype=Object.create(Phaser.Image.prototype),R.Column.prototype.constructor=R.Column,R.Column.prototype.setPosition=function(t,e){this.position.set(t,e),this.bottomCard&&this.bottomCard.setPosition(t,e)},R.Column.prototype.setScale=function(t){for(var e=this.topCard;e;)e.scale.set(t),e=e.under},R.Column.prototype.easyAddOne=function(t){this.topCard?(t.under=this.topCard,this.topCard.over=t,this.topCard=t):this.bottomCard=this.topCard=t,t.column=this,t.bringToTop()},R.Column.prototype.add=function(t,e){if(t.column&&t.column.remove(t),this.topCard?this.topCard.add(t,e):(t.makeTween(this.x,this.y,e),t.tween.onComplete.add(function(){this.visible=!1},this),this.bottomCard=t),t.over)for(var i=t.over;i;)(this.topCard=i).column=this,i=i.over;else this.topCard=t;t.column=this},R.Column.prototype.remove=function(t){this.topCard=t.under,this.topCard?(this.topCard.over=null,this.topCard.isOpen||this.topCard.open(!0,!0)):this.bottomCard=null,t.under=null,t.column=null,this.squeezed&&this.adjust()},R.Column.prototype.pick=function(t,e){for(var i=this.topCard,s=-1,n=-1;i&&i.isOpen;){if(-1===s)s=i.si,n=i.vi;else{if(s!==i.si)break;if(n+1!==i.vi)break;n=i.vi}if(i.getBounds().contains(t,e))return i;i=i.under}return null},R.Column.prototype.checkCard=function(t){return!this.topCard||t.vi+1===this.topCard.vi},R.Column.prototype.isSorted=function(){var t=this.topCard,e=t.vi;if(0!==e)return!1;var i=t.si;for(t=t.under;t&&t.isOpen;){if(t.si!==i)return!1;if(t.vi!==e+1)return!1;if(12===(e=t.vi))return!0;t=t.under}return!1},R.Column.prototype.countSorted=function(){if(this.rown=0,this.untilRown=0,this.topCard){var t=this.topCard,e=t.vi,i=t.si;for(t=t.under;t&&t.isOpen&&t.si===i&&t.vi===e+1;)++this.rown,this.untilRown=e,e=t.vi,t=t.under}},R.Column.prototype.moveToFoundation=function(t){var e=this.topCard,i=13;for(delay=0;i--;)this.remove(e),t.add(e,delay),delay+=100,0===i&&(t.column=this,t.under=e.under,e.under&&(t.underIsOpen=e.under.isOpen),e.tween.onComplete.add(R.deck.sortZFoundation,R.deck)),e=this.topCard;R.sfx.win&&R.sfx.win.play()},R.Column.prototype.getMostBottomSortedCard=function(){if(!this.topCard)return null;var t=this.topCard,e=t,i=t.si,s=t.vi;for(t=t.under;t&&t.isOpen&&t.si===i&&t.vi===s+1;)s=t.vi,t=(e=t).under;return e},R.Column.prototype.setSkin=function(){for(var t=this.bottomCard;t&&!t.isOpen;)t.loadTexture(R.currentSkin),t=t.over},R.Column.prototype.checkSqueeze=function(){if(this.squeezed=!1,this.topCard){var t=this.topCard.y+R.hCard-(game.height-R.maxDistanceToBottomEdge);if(!(t<=0)){this.squeezed=!0;for(var e=this.bottomCard.over,i=e.under.y;e;)0<t?(t-=e.y-i-R.cardOffsetSqueeze,i=e.y,e.y=e.under.y+R.cardOffsetSqueeze):e.y=e.under.y+(e.under.isOpen?R.hCardOffsetOpen:R.hCardOffsetClose),e=e.over}}},R.Column.prototype.adjust=function(){this.setPosition(this.x,this.y),this.checkSqueeze()},R.Column.prototype.countHiddenCards=function(){for(var t=0,e=this.bottomCard;e&&!e.isOpen;)++t,e=e.over;return t},R.Column.prototype.sortZ=function(){for(var t=this.bottomCard;t;)t.bringToTop(),t=t.over},R.Foundation=function(t,e){this.x=t,this.y=e,this.column=null,this.under=null,this.underIsOpen=null,this.pile=[],this.lastCard=null,this.scored=!1},R.Foundation.prototype.constructor=R.Foundation,R.Foundation.prototype.add=function(t,e){this.pile.push(t),t.makeTween(this.x,this.y,e),t.tween.onStart.add(t.bringToTop,t),t.tween.onComplete.add(this.onEndAdd,this),this.scored||(PlayState.scoring(100,1),this.scored=!0)},R.Foundation.prototype.onEndAdd=function(t){this.lastCard&&game.world.remove(this.lastCard),this.lastCard=t},R.Foundation.prototype.backToColumn=function(){var t=null;this.under&&this.under.open(this.underIsOpen,!1);for(var e=13;e--;)t=this.pile.pop(),game.world.add(t),this.column.add(t,0),t.setPosition(t.tween.properties.x,t.tween.properties.y);this.column.checkSqueeze(),this.lastCard=null},R.Foundation.prototype.setPosition=function(t,e){this.x=t,this.y=e;for(var i=0;i<this.pile.length;++i)this.pile[i].tween&&this.pile[i].tween.stop(!0),this.pile[i].position.set(t,e),this.pile[i].scale.set(R.scaleCard);this.lastCard&&this.lastCard.bringToTop()},R.Foundation.prototype.sortZ=function(){for(var t=this.pile.length;t--&&this.pile[t].parent;)this.pile[t].bringToTop()},R.Move=function(t,e){0===(this.type=t)&&(this.card=e,this.column=e.column,this.under=e.under,e.under&&(this.underIsOpen=e.under.isOpen))},R.Move.prototype.constructor=R.Move,R.Move.prototype.backToColumn=function(){this.under&&this.under.open(this.underIsOpen,!1),this.column.add(this.card,0),this.card.setPosition(this.card.tween.properties.x,this.card.tween.properties.y),this.column.checkSqueeze()},R.moveSaver={moves:[],shutdown:function(){this.moves.length=0},save:function(t,e){this.moves.push(new R.Move(t,e))},undo:function(){if(0!==this.moves.length){var t=this.moves.pop();switch(t.type){case 0:t.backToColumn();break;case 1:R.deck.backToStock();break;case 2:R.deck.backFromFoundationToColumn(),this.undo()}R.deck.countHiddenCards(),PlayState.clearPrevCardPicked()}}},(R=R||{}).Clock=function(t,e,i,s){Phaser.Text.call(this,game,t,e,"00:00"),this.font=R.fontName,this.anchor.set(0,.5),this.align="left",this.fontSize=i,this.fill=s,this.minutes=0,this.seconds=0,this.timer=game.time.add(new Phaser.Timer(game,!0)),this.timer.loop(1e3,this.updateTime,this),this.timer.stop(!1)},R.Clock.prototype=Object.create(Phaser.Text.prototype),R.Clock.prototype.constructor=R.Clock,R.Clock.prototype.reset=function(t){this.seconds=this.minutes=0,t&&(this.timer.start(),this.text="0:00")},R.Clock.prototype.updateTime=function(){60==++this.seconds&&(this.seconds=0,++this.minutes);var t=this.seconds.toString(),e=this.minutes.toString()+":"+(this.seconds<10?"0"+t:t);this.text=e},R.Clock.prototype.stopTick=function(){this.timer.stop(!1)},R.Clock.prototype.pause=function(t){t?this.timer.pause():this.timer.resume()},R.Clock.prototype.getTotalSeconds=function(){return 60*this.minutes+this.seconds},(R=R||{}).pickedCard=null,R.deck={cards:[],columns:[],cardPlaces:[],original:[],srcPlace:null,state:0,currentOpenCards:0,pile:[],foundations:[],freeFund:0,pileOffset:18,possiblePutCardsIdx:0,possibleAutoMovies:[],tweensHint:[],timeEventHint:null,_hasStarted:!1,shutdown:function(){this.cardPlaces.length=0,this.cards.length=0,this.columns.length=0,this.foundations.length=0,this.pile.length=0,this.srcPlace=null,this.state=0,this.currentOpenCards=0,this.freeFund=0,this.tweensHint.length=0,this.timeEventHint=null,R.pickedCard=null,this.possibleAutoMovies.length=0,this._hasStarted=!1},init:function(){var t=0;for(t=0;t<10;t++){var e=R.createImage(0,0,"play","card_place",0,0);e.name="e",this.cardPlaces.push(e)}for(t=0;t<8;t++)this.foundations.push(new R.Foundation(0,0));for(t=0;t<10;t++)this.columns.push(new R.Column);for(this.srcPlace=R.createImage(0,0,R.currentSkin,null,0,0),this.srcPlace.visible=!0,t=0;t<5;t++)this.addStock();if(this.srcPlace.bringToTop(),104!==this.original.length){var i=[],s=0,n=0,a=1;for(2===R.complexity?a=2:3===R.complexity&&(a=4),t=0;t<104;t++)i.push([s,n]),++n===R.values.length&&(n=0,++s===a&&(s=0));for(var o=i.length;o--;){t=game.rnd.between(0,i.length-1);var r=new R.Card(i[t][0],i[t][1]);this.cards.push(r),this.original.push(r.si+"."+r.vi),i.splice(t,1)}}else for(t=0;t<104;t++){var h=this.original[t].split(".");r=new R.Card(1*h[0],1*h[1]);this.cards.push(r)}this._hasStarted=!1},resize:function(){var t=0,e=0;if(this.srcPlace.scale.set(R.scaleCard),game.width>game.height){t=.5*(game.width-R.BASE_GAME_WIDTH)+6,e=game.device.desktop?20:60;var i=t+10*(R.wCard+R.xColumnDistance)+18,s=e+30;for(var n in this.foundations)this.foundations[n].setPosition(i,s),s+=30;this.srcPlace.y=600}else{t=7,e=160,this.srcPlace.y=20;i=t+30;for(var n in this.foundations)this.foundations[n].setPosition(i,this.srcPlace.y),i+=30*R.scaleCard}for(var n in this.columns)this.cardPlaces[n].position.set(t,e+4),this.cardPlaces[n].scale.set(R.scaleCard),this.columns[n].setPosition(t,e),this.columns[n].setScale(R.scaleCard),this.columns[n].topCard&&this.columns[n].topCard.tween2&&this.columns[n].topCard.tween2.stop(!0),this.columns[n].checkSqueeze(),t+=R.wCard+R.xColumnDistance;for(var n in this.srcPlace.x=game.width>game.height?t+18:this.columns[9].x,this.pile)this.pile[n].position.set(this.srcPlace.x,this.srcPlace.y),this.pile[n].scale.set(R.scaleCard),game.width>game.height?this.srcPlace.y-=this.pileOffset:this.srcPlace.x-=this.pileOffset;for(var n in this.cards)this.cards[n].tween&&this.cards[n].tween.stop(!0),this.cards[n].position.set(this.srcPlace.x,this.srcPlace.y),this.cards[n].scale.set(R.scaleCard)},start:function(){for(var t=100,e=null,i=0,s=0,n=game.world.total;s<54;){for(var a=0;a<10&&s<54;++a)e=this.cards.pop(),game.world.addAt(e,n),43<s&&e.open(!0),this.columns[a].add(e,0),e.tween.stop(!1),e.makeTween(this.columns[a].x,this.columns[a].y+R.hCardOffsetClose*i,t),e.tween.onStart.add(e.bringToTop,e),t+=110,++s;++i}this.columns[0].bottomCard.tween.onStart.add(this.beforeStart,this),e.tween.onComplete.add(this.beginPlay,this),this._hasStarted=!0,R.cardsHiddenN=94},beforeStart:function(){this.removeStock(),this._hasStarted=!1},beginPlay:function(){this._hasStarted&&this.beforeStart();for(var t=0;t<this.columns.length;++t)this.columns[t].sortZ();PlayState.beginPlay()},removeStock:function(){var t=this.pile.pop();game.world.remove(t),t.destroy(),game.width>game.height?this.srcPlace.y+=this.pileOffset:this.srcPlace.x+=this.pileOffset},addStock:function(){var t=R.createImage(this.srcPlace.x,this.srcPlace.y,R.currentSkin,null,0,0);t.scale.set(R.scaleCard),game.world.add(t),t.bringToTop(),this.pile.push(t),game.width>game.height?this.srcPlace.y-=this.pileOffset:this.srcPlace.x-=this.pileOffset},pick:function(t,e){if(0<this.cards.length&&this.srcPlace.getBounds().contains(t,e)){var i=this.emptyColumnIdx();return this.clearTweensHint(),-1==i?(this.distributeCards(),PlayState.resetBonus(1),PlayState.move(),R.moveSaver.save(1),R.sfx.cardselect&&R.sfx.cardselect.play()):(this.markHint(this.cardPlaces[i]),PlayState.showEmptyWarning(),R.sfx.error&&R.sfx.error.play()),null}var s=null;for(var n in this.columns)if(s=this.columns[n].pick(t,e))return this.clearTweensHint(),s;return null},put:function(t){var e=null,i=null,s=null,n=1e4,a=0;for(var o in this.columns)(s=this.columns[o])!==t.column&&(i=s.topCard?s.topCard:s,(a=Phaser.Point.distance(t,i))<R.wCard&&a<n&&(n=a,e=s));e&&e.checkCard(t)?this.addCardToColumn(e,t):this.back(t)},addCardToColumn:function(t,e){R.moveSaver.save(0,e),t.add(e,0),e.tween.onComplete.add(this.isAllSorted,this),PlayState.move(),R.sfx.correct&&R.sfx.correct.play()},back:function(t){var e=null;e=t.under?{x:t.under.x,y:t.under.y+(t.under.isOpen?R.hCardOffsetOpen:R.hCardOffsetClose)}:t.column,t.makeTween(e.x,e.y,0),R.sfx.error&&R.sfx.error.play()},distributeCards:function(){for(var t=null,e=10,i=1e3;e--;){if(t=this.cards.pop(),game.world.add(t),t.open(!0,!1),t.rotation=Math.PI,t.x=this.srcPlace.x+R.wCard,t.y=this.srcPlace.y+R.hCard,this.columns[e].add(t,i),t.tween.onComplete.add(this.isAllSorted,this),t.tween2=game.add.tween(t).to({rotation:0},t.tween.totalDuration,Phaser.Easing.Linear.None,!0,i),t.tween2.onComplete.add(t.setTween2Null,t),0===this.cards.length){this.srcPlace.visible=!1;break}i-=100}0<this.pile.length&&this.removeStock(),PlayState.clearPrevCardPicked()},backToStock:function(){var t=null;0===this.cards.length?this.srcPlace.visible=!0:this.addStock(),this.srcPlace.bringToTop();for(var e=0;e<10;++e)(t=this.columns[e].topCard).over=null,game.world.remove(t),this.columns[e].remove(t),this.cards.push(t)},isAllSorted:function(t){t.column.isSorted()?(t.column.moveToFoundation(this.foundations[this.freeFund]),8==++this.freeFund?this.foundations[7].pile[12].tween.onComplete.add(PlayState.win,PlayState):R.moveSaver.save(2)):(t.column.checkSqueeze(),PlayState.resetBonus(1)),R.cardsHiddenN===this.cards.length&&PlayState.startWaitingAutoSolveQ()},backFromFoundationToColumn:function(){--this.freeFund,this.foundations[this.freeFund].backToColumn()},removeInvert:function(t){game.world.remove(t)},emptyColumnIdx:function(){for(var t=this.columns.length;t--;)if(!this.columns[t].topCard)return t;return-1},markHint:function(t,e){R.centerAnchor(t),this.tweenRotatation(t,.225).onComplete.add(this.unmarkHint,this),e&&(this.timeEventHint=null)},tweenRotatation:function(t,e){var i=game.add.tween(t).to({rotation:e},200,Phaser.Easing.Back.Out,!0);return this.tweensHint.push(i),i.onComplete.add(this.popTweensHint,this),i},popTweensHint:function(t){0<this.tweensHint.length&&this.tweensHint.shift()},unmarkHint:function(t){this.tweenRotatation(t,0).onComplete.add(R.defaultAnchor,R)},clearTweensHint:function(){for(;0<this.tweensHint.length;)this.tweensHint[0].stop(!0);this.timeEventHint&&(game.time.events.remove(this.timeEventHint),this.timeEventHint=null)},setSkin:function(){this.srcPlace.loadTexture(R.currentSkin);for(var t=this.pile.length;t--;)this.pile[t].loadTexture(R.currentSkin);for(t=this.columns.length;t--;)this.columns[t].setSkin()},visible:function(t){for(var e=this.cardPlaces.length;e--;)this.cardPlaces[e].visible=t},countHiddenCards:function(){for(var t=R.cardsHiddenN=0;t<10;++t)R.cardsHiddenN+=this.columns[t].countHiddenCards();R.cardsHiddenN+=this.cards.length},autoPut:function(t,e){(e||this.possibleAutoMovies.length<2)&&this.getAllPossibleMovies(t),0===this.possibleAutoMovies.length?(this.back(t),t.tween.onComplete.add(t.shake,t)):(this.addCardToColumn(this.possibleAutoMovies[this.possiblePutCardsIdx],t),++this.possiblePutCardsIdx===this.possibleAutoMovies.length&&(this.possiblePutCardsIdx=0))},getAllPossibleMovies:function(t){for(var e=null,i=null,s=this.possibleAutoMovies.length=0;s<10;++s)e=this.columns[s],t.column!==e&&(i=e.topCard,e.checkCard(t)&&(i&&e.countSorted(),this.possibleAutoMovies.push(e)));if(0<this.possibleAutoMovies.length){var n=!t.under||t.under.isOpen&&t.vi+1===t.under.vi;1<this.possibleAutoMovies.length&&(R.pickedCard=t,this.possibleAutoMovies.sort(this.sortAutoMoves),R.pickedCard=null),n&&this.possibleAutoMovies.push(t.column),this.possiblePutCardsIdx=0}},sortAutoMoves:function(t,e){var i=R.pickedCard.si,s=t.topCard,n=e.topCard;return s?n?n.si===i?s.si===i?e.rown-t.rown:1:s.si===i?-1:0:-1:n?1:0},sortZFoundation:function(){for(var t=0;t<8&&0<this.foundations[t].pile.length;++t)this.foundations[t].sortZ()}};var HomeState={startOption:0,bg:null,bgSideLeft:null,bgSideRight:null,logo:null,btnPlay:null,btnMoregames:null,btnMenu:null,groupCard:null,windowSuit:null,options:null,shutdown:function(){this.bg=null,this.bgSideLeft=null,this.bgSideRight=null,this.logo=null,this.btnMoregames=null,this.btnPlay=null,this.btnMenu=null,this.groupCard=null,this.windowSuit=null,this.options=null},buttonsEnabled:function(t){this.btnMenu.inputEnabled=this.btnMoregames.inputEnabled=this.btnPlay.inputEnabled=t},create:function(){this.bg=R.createImage(0,0,"bg_home",null,0,0),this.bgSideLeft=R.createImage(0,0,"bg_top",null,1,1),this.bgSideRight=R.createImage(0,0,"bg_top",null,0,1),this.groupCard=game.add.group();for(var t=[{x:214,y:50,a:-22.22},{x:1260,y:10,a:12.46},{x:116,y:389,a:-75.4},{x:1214,y:370,a:-18},{x:197,y:611,a:-26.17},{x:651,y:500,a:69.03},{x:943,y:632,a:67.16},{x:1245,y:674,a:40.31}],e=0;e<t.length;e++){var i=game.rnd.pick(R.values)+game.rnd.pick(R.suits),s=R.createImage(t[e].x,t[e].y,i,null,0,0);s.angle=t[e].a,this.groupCard.add(s)}this.logo=R.createImage(0,0,"logo",null),this.btnPlay=R.createButton(0,0,this.onButtonPlay,this,"btn_play","btn_play",null),this.btnMoregames=R.createButton(0,0,Publisher.onMoregamesButton,Publisher,"ui","button_green",R.strings.more_games,42),this.btnMenu=R.createButton(0,0,this.onButtonMenu,this,"ui","btn_options",null),this.options=R.createOptionsWindow(this.onCloseOptions,this,!1),this.windowSuit=R.createSuitWindow(this.onCloseWindow,this),1==this.startOption&&this.windowSuit.open(),BootState.fullScreenHandler(),this.buttonsEnabled(!1),this.resize(game.width,game.height),R.sceneTransition(300,null)},resize:function(t,e){if(this.bgSideLeft.visible=!1,this.bgSideRight.visible=!1,e<t){var i=.5*(t-1440);this.bg.position.set(i,0),this.bg.rotation=0,this.groupCard.position.set(i,0),this.groupCard.scale.set(1),1440<t&&(this.bgSideLeft.visible=!0,this.bgSideRight.visible=!0,this.bgSideLeft.scale.y=this.bgSideRight.scale.y=100<i?i/99.5:1,this.bgSideLeft.rotation=-Math.PI/2,this.bgSideRight.rotation=Math.PI/2,this.bgSideLeft.position.set(.5+i,0),this.bgSideRight.position.set(1440+i-.5,0)),this.logo.position.set(R.halfGameWidth,365),this.logo.scale.set(1),this.btnPlay.position.set(R.halfGameWidth,750),this.btnMoregames.position.set(R.halfGameWidth,this.btnPlay.y+140)}else this.bg.position.set(R.BASE_GAME_HEIGHT,.5*(e-1440)),this.bg.rotation=Math.PI/2,this.groupCard.scale.set(R.wCard_V/R.wCard_H),this.groupCard.position.set(0,R.halfGameHeight-360),1440<e&&(this.bgSideLeft.visible=!0,this.bgSideRight.visible=!0,this.bgSideLeft.scale.y=this.bgSideRight.scale.y=100<this.bg.y?this.bg.y/99.5:1,this.bgSideRight.scale.y=-this.bgSideRight.scale.y,this.bgSideLeft.rotation=this.bgSideRight.rotation=0,this.bgSideLeft.position.set(R.BASE_GAME_HEIGHT,this.bg.y+.5),this.bgSideRight.position.set(0,e+100*this.bgSideRight.scale.y)),this.logo.position.set(R.halfGameWidth,R.halfGameHeight-200),this.logo.scale.set(.6),this.btnPlay.position.set(R.halfGameWidth,R.halfGameHeight+200),this.btnMoregames.position.set(R.halfGameWidth,this.btnPlay.y+180);this.btnMenu.position.set(120,120),this.windowSuit.exists?this.windowSuit.resize(t,e):this.options.exists&&this.options.resize(t,e)},start:function(){0==this.startOption?this.buttonsEnabled(!0):this.startOption=0},onButtonPlay:function(){this.buttonsEnabled(!1),this.windowSuit.open()},onCloseWindow:function(){this.buttonsEnabled(!0)},onButtonMenu:function(){this.buttonsEnabled(!1),this.options.open()},onCloseOptions:function(){this.buttonsEnabled(!0)}},LoadState={loadingBar:null,loadingBarFull:null,labelLoad:null,labelPercent:null,logo:null,sgLogo:null,sfx_key:null,init:function(){game.load.onFileComplete.add(this.fileComplete,this),game.load.onLoadComplete.add(this.loadComplete,this)},create:function(){for(var t in R.suits)for(var e in R.values){var i=R.values[e]+R.suits[t];game.load.image(i,"assets/cards/"+i+".png")}for(t=1;t<15;++t){i="skin"+t;game.load.image(i,"assets/skins/"+i+".png")}if(game.load.atlas("ui","assets/atlas_ui.png","assets/atlas_ui.json"),game.load.atlas("btn_play","assets/btn_play.png","assets/btn_play.json"),game.load.image("bg_home","assets/bg_home.jpg"),game.load.image("bg_play_landscape","assets/bg_play_landscape.jpg"),game.load.image("bg_play_portrait","assets/bg_play_portrait.jpg"),game.load.image("bg_side_left","assets/bg_side_left.jpg"),game.load.image("bg_side_right","assets/bg_side_right.jpg"),game.load.image("bg_top","assets/bg_top.jpg"),game.load.spritesheet("particles","assets/particles.png",32,32,16,0,0),game.load.image("bg","assets/bg.png",""),game.load.atlas("spinner","assets/loading.png","assets/loading.json"),game.load.json("sword","assets/sword.json"),R.canAudio){var s=["button","cardmove","cardselect","card","correct","error","win","vic","dlg","piano","claps","fw1","fw2","fw3","fw4"];for(var n in s)game.load.audio(s[n],["assets/sfx/"+s[n]+".ogg","assets/sfx/"+s[n]+".mp3"]);this.sfx_key=s}R.strings=game.cache.getJSON("strings"),this.createEnvironment(),this.resize(game.width,game.height),BootState.fullScreenHandler(),game.load.start()},shutdown:function(){this.loadingBar=null,this.loadingBarFull=null,this.labelLoad=null,this.labelPercent=null,this.logo=null,this.sgLogo=null,this.sfx_key=null},createEnvironment:function(){game.stage.backgroundColor="#005c2d",this.logo=R.createImage(0,0,"logo",null),this.logo.scale.set(.6),this.loadingBar=R.createImage(0,0,"play","bar_empty",0,0),this.loadingBar.scale.x=this.logo.width,this.loadingBarFull=R.createImage(0,0,"play","bar_full",0,0),this.labelLoad=R.createText(0,0,42,R.strings.loading,"#cba41b",!0,5),this.labelLoad.stroke="#110905",this.labelPercent=R.createText(0,0,32,"0%","#cba41b",!0,5),this.labelLoad.stroke="#110905"},resize:function(t,e){this.logo.position.set(R.halfGameWidth,R.halfGameHeight-100),this.loadingBar.position.set(.5*(t-this.loadingBar.scale.x),R.halfGameHeight+120),this.loadingBarFull.position.set(this.loadingBar.x,this.loadingBar.y+1),this.labelLoad.position.set(R.halfGameWidth,this.loadingBar.y-22),this.labelPercent.position.set(R.halfGameWidth,this.loadingBar.y+34)},fileComplete:function(t,e,i,s,n){this.loadingBarFull.scale.x=this.loadingBar.scale.x*t*.01,this.labelPercent.setText(t.toString()+"%")},loadComplete:function(){if(R.canAudio)for(var t in this.sfx_key)R.sfx[this.sfx_key[t]]=game.add.audio(this.sfx_key[t]);game.device.desktop||R.adjustForMobile(),R.loadGame(),sdkHandler.trigger("loading.completed")}};(R=R||{}).saveGame=function(){game.device.localStorage&&sdkHandler.trigger("save",{key:"Softgames_BestClassicSpider",value:JSON.stringify(R.playerData),callback:function(t){t&&console.log(t)}})},R.loadGame=function(){if(game.device.localStorage){sdkHandler.trigger("restore",{key:"Softgames_BestClassicSpider",callback:function(t,e){console.log("callback on restore"),t?console.log(t):e&&(this.data=e)}.bind(this)});var t=this.data;t&&(R.playerData=JSON.parse(t),R.currentSkin=R.playerData.currentSkin)}},(R=R||{}).BASE_GAME_WIDTH=1600,R.BASE_GAME_HEIGHT=960,R.MAX_GAME_WIDTH=2e3,R.MAX_GAME_HEIGHT=1720,R.MIN_GAME_HEIGHT=1180,R.gameWidth=R.BASE_GAME_WIDTH,R.gameHeight=R.BASE_GAME_HEIGHT,R.halfGameWidth=.5*R.gameWidth,R.halfGameHeight=.5*R.gameHeight,R.prevWindowWidth=0,R.prevWindowHeight=0,R.canAudio=!1,R.sfx={},R.fontName="TCCEB",R.strings=null,R.currentSkin="skin1",R.unlockHint=!0,R.score=0,R.bonus=0,R.bonusScore=[0,0],R.moves=0,R.playerData={currentSkin:"skin1",autoHint:!0,score:0,winAnims:[]};var game=null;R.createImage=function(t,e,i,s,n,a){void 0===n&&(n=.5),void 0===a&&(a=n);var o=game.add.image(t,e,i,s);return o.anchor.set(n,a),o};var R,PlayState={bg:null,spinner:null,spinnerBg:null,bgSideLeft:null,bgSideRight:null,bgTop:null,btnMenu:null,btnHint:null,btnUndo:null,labelTimeName:null,labelTime:null,labelBonusName:null,labelBonus:null,labelPointsName:null,labelPoints:null,tweenPressToStart:null,cardPicked:null,prevCardPicked:null,pointerOffset:null,pos0CardPicked:{x:0,y:0},wasNotDragged:!(R.shuffleWinAnimatorsOrder=function(){var t=[1,2,3,4,5,6,7,8,9,10,11],e=0;for(R.playerData.winAnims.length=0;0<t.length;)e=game.rnd.between(0,t.length-1),R.playerData.winAnims.push(t[e]),t.splice(e,1)}),rewardAdsOn:null,options:null,popupWindow:null,watchAdWindow:null,claimHintsWindow:null,noMoreVideosWindow:null,autoCompleteWindow:null,completeWindow:null,nomovesWindow:null,numOfHintsUsed:5,timeEventHint:null,shadow:null,flyText:null,eventAutoSolveQWaiting:null,eventWaitingWinAnimation:null,scoreMoveNum:[0,0],hints:null,shutdown:function(){R.waGroup=null,R.cardShaking=null,1===R.deck.state&&(R.deck.state=0,R.saveGame()),this.bgSideLeft=null,this.bgSideRight=null,this.bgTop=null,this.bg=null,this.spinner=null,this.spinnerBg=null,this.btnMenu=null,this.btnHint=null,this.btnUndo=null,this.labelTimeName=null,this.labelTime=null,this.labelBonusName=null,this.labelBonus=null,this.labelPointsName=null,this.labelPoints=null,this.tweenPressToStart=null,this.cardPicked=null,this.clearPrevCardPicked(),this.pointerOffset=null,this.options=null,this.popupWindow=null,this.watchAdWindow=null,this.claimHintsWindow=null,this.noMoreVideosWindow=null,this.autoCompleteWindow=null,this.completeWindow=null,this.nomovesWindow=null,this.timeEventHint=null,this.shadow=null,this.flyText=null,this.eventAutoSolveQWaiting=null,this.eventWaitingWinAnimation=null,this.hints=null,R.moveSaver.shutdown(),R.deck.shutdown()},buttonsEnabled:function(t){this.btnMenu.inputEnabled=this.btnHint.inputEnabled=this.btnUndo.inputEnabled=t},labelsVisible:function(t){this.labelPointsName.visible=this.labelPoints.visible=this.labelBonusName.visible=this.labelBonus.visible=this.labelTimeName.visible=this.labelTime.visible=t},create:function(){if(game.renderer.clearBeforeRender=!1,this.bg=R.createImage(0,0,"bg_play_landscape",null,0,0),this.bgSideLeft=R.createImage(0,0,"bg_side_left",null,1,0),this.bgSideRight=R.createImage(0,0,"bg_side_right",null,0,0),this.bgTop=R.createImage(0,0,"bg_top",null,0,1),this.btnMenu=R.createButton(200,866,this.onButtonMenu,this,"play","btn_menu",null),this.btnHint=R.createButton(0,0,this.showHint,this,"play","btn_hint",null),this.btnUndo=R.createButton(1370,this.btnMenu.y,this.onButtonUndo,this,"play","btn_undo",null),this.rewardAdsOn=sgSettings.config.rewarded.enabled,this.rewardAdsOn&&(this.spinnerBg=game.add.sprite(game.world.centerX,game.world.centerY,"bg"),this.spinnerBg.anchor.setTo(.5,.5),this.spinnerBg.alpha=0,this.spinner=game.add.sprite(game.world.centerX,game.world.centerY,"spinner"),this.spinner.anchor.setTo(.5,.5),this.spinner.alpha=0,this.hintText=R.createText(0,0,20,this.numOfHintsUsed,"#cba41b",!0,6),this.btnHint.addChild(this.hintText)),!game.device.desktop){this.btnMenu.scale.set(1.5),this.btnHint.scale.set(1.5),this.btnUndo.scale.set(1.5),this.btnMenu.x=150}this.labelTimeName=this.createText(R.strings.time,"#cba41b"),90<this.labelTimeName.width&&this.labelTimeName.scale.set(90/this.labelTimeName.width),this.labelTime=new R.Clock(0,0,this.labelTimeName.fontSize,"#ffffff"),game.world.add(this.labelTime),this.labelBonusName=this.createText(R.strings.bonus,"#cba41b"),116<this.labelBonusName.width&&this.labelBonusName.scale.set(116/this.labelBonusName.width),this.labelBonus=this.createText("0","#ffffff"),this.labelBonus.anchor.x=0,this.labelBonus.align="left",this.labelPointsName=this.createText(R.strings.points,"#cba41b"),this.labelPoints=this.createText("0","#ffffff"),this.labelPoints.anchor.x=0,this.labelPoints.align="left",this.flyText=new R.FlyText(6,this.labelPoints.fontSize),this.labelsVisible(!1),this.createBlinkLabel(R.strings[game.device.desktop?"press_to_start":"tap_to_start"]),this.options=R.createOptionsWindow(this.onCloseOptions,this.onCloseOptions,this,!0),this.popupWindow=R.PopupWindow(this.onCloseOptions,this.onCloseOptions,this,{title:R.strings.empty_slot_title,msg:R.strings.empty_slot_message}),this.watchAdWindow=R.PopupWindow(R.incentiviseTrigger,this.onCloseOptions,this,{title:"",msg:R.strings.rewarded_ads_msg,btnOk:R.strings.watch,size:50}),this.claimHintsWindow=R.PopupWindow(this.claimWindowClose,function(){PlayState.numOfHintsUsed=3,PlayState.btnHint.children[0].text=PlayState.numOfHintsUsed,PlayState.onCloseOptions()},this,{title:"",msg:R.strings.you_get_more_hints,btnOk:R.strings.claim,size:50}),this.noMoreVideosWindow=R.PopupWindow(this.noMoreVideosWindowClose,this.onCloseOptions,this,{title:"",msg:R.strings.no_more_videos,btnOk:R.strings.ok,size:50}),this.autoCompleteWindow=R.AutoCompleteWindow(this.onAutoCompleteWindowClose,this.onAutoCompleteWindowClose,this),this.nomovesWindow=R.createNoMovesWindow(this.onCloseOptions,this.onCloseOptions,this),this.shadow=new R.Shadow,this.hints=new R.Hints,R.deck.init(),BootState.fullScreenHandler(),this.buttonsEnabled(!1),this.resize(game.width,game.height),R.sceneTransition(300,null)},claimWindowClose:function(){PlayState.numOfHintsUsed=3,PlayState.btnHint.children[0].text=PlayState.numOfHintsUsed,PlayState.setPause(!1),PlayState.claimHintsWindow.close()},noMoreVideosWindowClose:function(){PlayState.setPause(!1),PlayState.noMoreVideosWindow.close()},addSpinner:function(){game.world.bringToTop(this.spinnerBg),game.world.bringToTop(this.spinner),this.spinner.animations.add("spinnerAnim"),this.spinner.animations.play("spinnerAnim",30,!0),this.spinnerBg.alpha=1,game.add.tween(this.spinner).to({alpha:1},1e3,"Linear",!0,0)},removeSpinner:function(){game.add.tween(this.spinnerBg).to({alpha:0},1e3,"Linear",!0,0),game.add.tween(this.spinner).to({alpha:0},500,"Linear",!0,0)},resize:function(t,e){this.bgSideLeft.visible=!1,this.bgSideRight.visible=!1,this.bgTop.visible=!1;var i=e-53;if(e<t){var s=.5*(t-1440);this.bg.loadTexture("bg_play_landscape"),this.bg.position.set(s,0),1440<t&&(this.bgSideLeft.visible=!0,this.bgSideRight.visible=!0,this.bgSideLeft.scale.x=this.bgSideRight.scale.x=100<s?s/100:1,this.bgSideLeft.position.set(s,0),this.bgSideRight.position.set(this.bg.x+1440,0)),this.btnMenu.y=this.btnUndo.y=game.device.desktop?866:856,this.labelTimeName.position.set(496+s,i),this.labelBonusName.position.set(740+s,i),this.labelPointsName.position.set(950+s,i)}else{if(this.bg.loadTexture("bg_play_portrait"),this.bg.position.set(0,e-1440),1440<e){this.bgTop.visible=!0;var n=this.bg.y;this.bgTop.y=n,this.bgTop.scale.y=100<n?n/100:1}this.btnMenu.y=this.btnUndo.y=e-(game.device.desktop?172:180),i=e-56,this.labelTimeName.position.set(250,i),this.labelBonusName.position.set(490,i),this.labelPointsName.position.set(714,i)}this.btnUndo.x=t-(game.device.desktop?60:70),this.btnHint.position.set(t-(game.device.desktop?150:220),this.btnUndo.y),this.labelTime.position.set(this.labelTimeName.x+10,i),this.labelBonus.position.set(this.labelBonusName.x+10,i),this.labelPoints.position.set(this.labelPointsName.x+10,i),R.adjustByOrientation(t,e),R.deck.resize(),this.options.exists&&this.options.resize(t,e),this.popupWindow.exists&&this.popupWindow.resize(t,e),this.autoCompleteWindow.exists&&this.autoCompleteWindow.resize(t,e),this.nomovesWindow.exists&&this.nomovesWindow.resize(t,e),this.completeWindow?this.completeWindow.resize(t,e):this.eventWaitingWinAnimation&&this.inputOnDownWin()},createText:function(t,e){var i=R.createText(0,0,27,t,e);return i.align="right",i.anchor.set(1,.5),i},inputOnDown:function(t,e){if(0===R.deck.state)return R.deck.state=1,void R.deck.resize();if(R.cardShaking&&R.cardShaking.stopShaking(),!(0<game.tweens._tweens.length&&game.tweens._tweens.length!==R.deck.tweensHint.length)){var i=R.deck.pick(t.x,t.y);i&&i.parent===game.world&&(this.shadow.cast(i),i.setOnTop(),this.pointerOffset=Phaser.Point.subtract(i,t),this.cardPicked=i,this.pos0CardPicked.x=i.x,this.pos0CardPicked.y=i.y,this.wasNotDragged=!0,R.sfx.cardselect&&R.sfx.cardselect.play())}},inputOnUp:function(t,e){if(this.cardPicked){if(this.wasNotDragged){var i=R.cardsHiddenN;R.deck.autoPut(this.cardPicked,this.cardPicked!==this.prevCardPicked),this.prevCardPicked=R.cardsHiddenN<i?null:this.cardPicked}else R.deck.put(this.cardPicked),this.prevCardPicked=null;this.cardPicked=null}},clearPrevCardPicked:function(){this.prevCardPicked=null},start:function(){this.buttonsEnabled(!0),this.blinkLabel(),R.deck.start(),game.input.onDown.add(this.inputOnDown,this),game.input.onUp.add(this.inputOnUp,this),sdkHandler.trigger("gameStart")},beginPlay:function(){R.deck.state=1,R.score=0,R.bonus=0,R.bonusScore[0]=R.bonusScore[1]=0,R.moves=0,R.unlockHint=!0,this.scoreMoveNum[0]=this.scoreMoveNum[1]=-2,this.timePick=0,this.destroyBlinkLabel(),this.labelsVisible(!0),this.labelTime.reset(!0),this.labelPoints.text=R.score.toString(),this.timeEventHintReset()},update:function(){this.cardPicked?(this.cardPicked.setPosition(game.input.activePointer.x+this.pointerOffset.x,game.input.activePointer.y+this.pointerOffset.y),this.wasNotDragged&&(10<Math.abs(this.cardPicked.x-this.pos0CardPicked.x)||10<Math.abs(this.cardPicked.y-this.pos0CardPicked.y))&&(this.wasNotDragged=!1),this.shadow.move(this.cardPicked)):(this.shadow.card&&this.shadow.hiding(),R.cardShaking&&R.cardShaking.shaking())},setPause:function(t){t?(game.input.onDown.remove(this.inputOnDown,this),game.input.onUp.remove(this.inputOnUp,this)):(game.input.onDown.add(this.inputOnDown,this),game.input.onUp.add(this.inputOnUp,this)),this.buttonsEnabled(!t),this.labelTime.pause(t)},onButtonMenu:function(){sdkHandler.trigger("beforePlayButtonDisplay",{callback:function(){this.options.btnNewGame.visible=1,this.options.btnRestart.visible=1}},this),this.setPause(!0),this.options.open()},showHint:function(){this.numOfHintsUsed<=0&&this.rewardAdsOn?(this.numOfHintsUsed=0,this.setPause(!0),this.watchAdWindow.open()):this.nomovesWindow.exists||this.options.exists||this.cardPicked||!R.unlockHint||0!==game.tweens._tweens.length||(this.rewardAdsOn&&(this.numOfHintsUsed--,PlayState.btnHint.children[0].text=this.numOfHintsUsed),this.hints.hint()),this.timeEventHintReset()},onButtonUndo:function(){0!==game.tweens._tweens.length&&game.tweens._tweens.length!==R.deck.tweensHint.length||(R.deck.clearTweensHint(),R.moveSaver.undo(),this.hints.prevMoves=R.moves-1)},win:function(){this.setPause(!0),R.unlockHint=!1,0<R.bonus&&this.addScore(R.bonus);var t=10-this.labelTime.minutes;0<t&&this.addScore(100*t),0===R.playerData.winAnims.length&&R.shuffleWinAnimatorsOrder(),R["WinAnimator"+R.playerData.winAnims.pop()].init(),this.eventWaitingWinAnimation=game.time.events.loop(500,this.waitingWinAnimation,this),game.input.onDown.add(this.inputOnDownWin,this)},createBlinkLabel:function(t){if(!this.tweenPressToStart){var e=R.createText(game.width/2,game.height-150,32,t);e.fontWeight="lighter",this.tweenPressToStart=game.add.tween(e).to({alpha:0},300,Phaser.Easing.Linear.None,!1)}},blinkLabel:function(){this.tweenPressToStart.isRunning||(this.tweenPressToStart.start(),this.tweenPressToStart.yoyo(!0),this.tweenPressToStart.repeat(-1,300))},destroyBlinkLabel:function(){this.tweenPressToStart&&(this.tweenPressToStart.stop(),this.tweenPressToStart.target.destroy(),this.tweenPressToStart=null)},noMoves:function(){this.setPause(!0),this.nomovesWindow.open()},move:function(){-2!==this.scoreMoveNum[0]&&this.scoreMoveNum[0]!==R.moves&&this.resetBonus(0),++R.moves,this.timeEventHintReset()},scoring:function(t,e){this.scoreMoveNum[e]===R.moves-1&&(0===e?this.addBonus(0,t):0===R.bonusScore[1]?this.addBonus(1,t):this.addBonus(1,R.bonusScore[1]),this.displayBonus()),this.scoreMoveNum[e]=R.moves,this.addScore(t)},addScore:function(t){R.score+=t,this.labelPoints.text=R.score.toString(),this.flyText.launch(this.labelPoints.x+.5*this.labelPoints.width,this.labelPoints.y-20,"+"+t)},resetBonus:function(t){this.scoreMoveNum[t]=-2,R.bonusScore[t]=0},addBonus:function(t,e){R.bonusScore[t]+=e,R.bonus+=e,this.flyText.launch(this.labelBonus.x+.5*this.labelBonus.width,this.labelBonus.y-20,"+"+e)},displayBonus:function(){this.labelBonus.text=R.bonus.toString()},inputOnDownWin:function(){this.backgroundVisible(!0),game.time.events.removeAll(),this.eventWaitingWinAnimation=null,R.waGroup.removeAll(!0),game.input.onDown.remove(this.inputOnDownWin,this),this.completeWindow||(this.completeWindow=R.createCompleteWindow(this.completeGame,this),this.completeWindow.visible=0,sdkHandler.trigger("beforePlayButtonDisplay",{callback:function(){this.completeWindow.visible=1}},this)),R.sfx.claps&&R.sfx.claps.play()},onCloseOptions:function(){PlayState.setPause(!1)},restart:function(t){sdkHandler.trigger("playButtonPressed",{callback:function(){t&&(t.inputEnabled=!1),sdkHandler.trigger("gameOver",{score:0}),R.sceneTransition(300,"play")}},this)},newgame:function(t){sdkHandler.trigger("playButtonPressed",{callback:function(){t&&(t.inputEnabled=!1),HomeState.startOption=1,sdkHandler.trigger("gameOver",{score:0}),R.sceneTransition(300,"home")}},this)},completeGame:function(t){sdkHandler.trigger("playButtonPressed",{callback:function(){t&&(t.inputEnabled=!1),R.playerData.score=Math.max(R.playerData.score,R.score),R.saveGame(),HomeState.startOption=1,R.sceneTransition(300,"home"),sdkHandler.trigger("gameOver",{score:R.score})}},this)},timeEventHintReset:function(){this.timeEventHint&&game.time.events.remove(this.timeEventHint),R.playerData.autoHint&&!this.rewardAdsOn&&(this.timeEventHint=game.time.events.loop(2e4,this.showHint,this))},showEmptyWarning:function(){this.setPause(!0),this.popupWindow.open()},startWaitingAutoSolveQ:function(){this.eventAutoSolveQWaiting||(this.eventAutoSolveQWaiting=game.time.events.loop(100,this.waitingAutoSolveQ,this))},waitingAutoSolveQ:function(){0===game.tweens._tweens.length&&R.cardsHiddenN===R.deck.cards.length&&(game.time.events.remove(this.eventAutoSolveQWaiting),this.eventAutoSolveQWaiting=null,this.setPause(!0),R.cardsHiddenN=-100,this.autoCompleteWindow.open())},onAutoCompleteWindowClose:function(){-101===R.cardsHiddenN?(R.unlockHint=!1,void 0!==this.labelTime&&this.labelTime.pause(!1),R.solver.solve()):this.setPause(!1)},waitingWinAnimation:function(){0===R.waGroup.total&&this.inputOnDownWin()},backgroundVisible:function(t){this.bg.visible=t,game.width>game.height?(this.bgSideLeft.visible=t,this.bgSideRight.visible=t):this.bgTop.visible=t,this.btnMenu.visible=this.btnHint.visible=this.btnUndo.visible=t,this.labelTimeName.visible=this.labelTime.visible=this.labelBonusName.visible=this.labelBonus.visible=t,this.labelPointsName.visible=this.labelPoints.visible=t,R.deck.visible(t)}},Publisher=Publisher||{};Publisher.onMoregamesButton=function(t){game.scale.isFullScreen&&game.scale.stopFullScreen(),sdkHandler.trigger("moreGames")},(R=R||{}).ParticleSuit=function(t){var e="";switch(R.suits[t.si]){case"c":e="clubs";break;case"d":e="diamonds";break;case"h":e="hearts";break;case"s":e="spades"}Phaser.Image.call(this,game,t.x,t.y,"play",e),this.anchor.set(.5),this.dx=game.rnd.between(.5,2),game.rnd.between(0,1)&&(this.dx=-this.dx),this.dy=-game.rnd.between(4,8),this.g=game.rnd.realInRange(.05,.2),this.dr=game.rnd.realInRange(.05,.1),game.rnd.between(0,1)&&(this.dr=-this.dr),this.s=game.rnd.realInRange(.3,.8),this.cs=this.s,this.ds=game.rnd.realInRange(.01,.06),this.dsx=game.rnd.between(0,1),this.scale.set(this.s),R.waGroup.add(this)},R.ParticleSuit.prototype=Object.create(Phaser.Image.prototype),R.ParticleSuit.prototype.constructor=R.ParticleSuit,R.ParticleSuit.prototype.update=function(){this.x+=this.dx,this.y+=this.dy,this.rotation+=this.dr,this.dy+=this.g,this.cs-=this.ds,this.cs<-this.s&&(this.cs=this.s),this.dsx?this.scale.x=this.cs:this.scale.y=this.cs,this.y-this.height>game.height&&R.waGroup.remove(this,!0)},R.ParticlePlume=function(t){if(Phaser.Image.call(this,game,t.x,t.y,"particles",10),this.anchor.set(.5),this.tint=game.rnd.between(16776960,16777215),this.vx=game.rnd.realInRange(-.5,.5),this.vy=game.rnd.realInRange(-.5,.5),this.ds=game.rnd.realInRange(0,.01),this.va=game.rnd.realInRange(.01,.05),this.scale.set(game.rnd.realInRange(.5,1.2)),game.device.desktop){var e=R.waGroup.getChildIndex(t);e<1&&(e=1),R.waGroup.addAt(this,e-1)}else R.waGroup.add(this)},R.ParticlePlume.prototype=Object.create(Phaser.Image.prototype),R.ParticlePlume.prototype.constructor=R.ParticlePlume,R.ParticlePlume.prototype.update=function(){this.x+=this.vx,this.y+=this.vy,this.vy+=.01,this.scale.x-=this.ds,this.scale.y-=this.ds,this.alpha-=this.va,this.alpha<=0&&(this.alpha=0,R.waGroup.remove(this,!0))},R.particleFireworkFrames=[0,7,9,10],R.ParticleFirework=function(t,e,i,s){Phaser.Image.call(this,game,t,e,"particles",game.rnd.pick(R.particleFireworkFrames)),this.anchor.set(.5),this.tint=i;var n=new Phaser.Point(game.rnd.realInRange(-1,1),game.rnd.realInRange(-1,1));n.normalize();var a=game.rnd.realInRange(5,10);this.vx=n.x*a,this.vy=n.y*a,this.slow=game.rnd.realInRange(.92,.97),this.ds=.01,this.va=game.rnd.realInRange(.01,.02),this.scale.set(game.rnd.realInRange(.8,1)),R.waGroup.add(this),1<s&&new R.ParticleFirework(t,e,i,s-1)},R.ParticleFirework.prototype=Object.create(Phaser.Image.prototype),R.ParticleFirework.prototype.constructor=R.ParticleFirework,R.ParticleFirework.prototype.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=this.slow,this.vy*=this.slow,this.vy+=.05,this.scale.x+=this.ds,this.scale.y+=this.ds,this.alpha-=this.va,this.alpha<=0&&(this.alpha=0,R.waGroup.remove(this,!0))},(R=R||{}).createSuitWindow=function(t,e){var i=new R.Window(!0,!1,t,e);i.addChild(R.createText(i.width/2,100,80,R.strings.game_mode,"#cba41b",!0,6));var s=i.width/3,n=200;return R.createCardSequence(s-240+30,n,["s","s","s","s"],i),R.createCardSequence(2*s-240,n,["s","h","s","h"],i),R.createCardSequence(3*s-240-30,n,["s","h","c","d"],i),n=440,R.createSuiteButton(.5*s+30,n,1,R.strings.suit1,i),R.createSuiteButton(1.5*s,n,2,R.strings.suit2,i),R.createSuiteButton(2.5*s-30,n,3,R.strings.suit3,i),i},R.onSuitButton=function(t){R.complexity=t.name,t.parent.buttonsEnabled(!1),R.deck.original.length=0,R.sceneTransition(300,"play")},R.createCardSequence=function(t,e,i,s){for(var n=6;n<10;++n){var a=R.createImage(t,e,n.toString()+i[n-6],0,0);a.scale.set(.8),s.addChild(a),t+=30}},R.createSuiteButton=function(t,e,i,s,n){var a=n.createButton(t,e,R.onSuitButton,this,"ui","button_green",s,36);a.scale.x=.68,a.children[0].scale.x=1/a.scale.x,a.name=i,a.events.onInputDown.add(function(t){t.children[0].scale.set(.98/a.scale.x,.98)},a),a.events.onInputUp.add(function(t){t.children[0].scale.set(1/a.scale.x,1)},a)},R.createWindowButton=function(t,e,i,s,n,a,o,r){var h=r.createButton(t,e,n,a,"ui","button_green",i,s);return 1!=o&&(h.scale.x=o,h.children[0].scale.x=1/o,h.events.onInputDown.add(function(t){t.children[0].scale.set(.98/h.scale.x,.98)},h),h.events.onInputUp.add(function(t){t.children[0].scale.set(1/h.scale.x,1)},h)),h},R.createOptionsWindow=function(t,e,i){var s=new R.Window(!0,!1,t,e);s.selectSkinWindow=R.ChoiceSkinWindow(R.onChoiceSkinClose,s),s.resize=function(t,e){R.Window.prototype.resize.call(this,t,e),this.selectSkinWindow.exists&&this.selectSkinWindow.resize(t,e)},s.addChild(R.createText(s.width/2,100,80,R.strings.options,"#cba41b",!0,6));var n=new R.CheckButton(50,190,R.playerData.autoHint,R.onCheckButtonHints,R,R.strings.hints,34);s.addChild(n),s.buttons.push(n);var a=new R.CheckButton(n.x,260,!game.sound.mute,R.onSoundButtonHints,R,R.strings.sound,34);s.addChild(a),s.buttons.push(a);var o=Math.max(n.children[1].width,a.children[1].width)+n.width;a.x=n.x=.5*(s.width-o);var r=.5*s.width;i&&(s.btnNewGame=R.createWindowButton(r-180,380,R.strings.new_game,40,PlayState.newgame,PlayState,1,s),s.btnRestart=R.createWindowButton(180+r,s.btnNewGame.y,R.strings.restart,40,PlayState.restart,PlayState,1,s),s.btnNewGame.visible=0,s.btnRestart.visible=0);var h=R.createWindowButton(i?r-180:r,i?480:380,R.strings.skin,40,R.onChoiceSkin,s,1,s);R.createWindowButton(i?180+r:r,i?h.y:480,i?R.strings.continue:R.strings.ok,40,s.close,s,1,s);return s},R.onChoiceSkin=function(){this.buttonsEnabled(!1),this.selectSkinWindow.setCurrentSelectorPos(),this.selectSkinWindow.open()},R.onChoiceSkinClose=function(){this.buttonsEnabled(!0)},R.onCheckButtonHints=function(){R.playerData.autoHint=!R.playerData.autoHint,R.saveGame(),PlayState.hints&&PlayState.timeEventHintReset()},R.onSoundButtonHints=function(){game.sound.mute=!game.sound.mute},R.ChoiceSkinWindow=function(t,e){var i=new R.Window(!1,!1,t,e);i.selector=R.createImage(0,0,"play","selector"),i.setCurrentSelectorPos=function(){R.playerData.currentSkin!=R.currentSkin&&(R.currentSkin=R.playerData.currentSkin);for(var t=null,e=this.children.length;e--;)if(t=this.children[e],R.currentSkin==t.name){this.selector.position.set(t.x+.5*t.width,t.y+.5*t.height);break}},i.addChild(R.createText(i.width/2,60,50,R.strings.change_backs,"#cba41b",!0,6));for(var s=null,n=20,a=100,o=0;o<14;o++){var r="skin"+(o+1).toString();(s=R.createImage(n,a,r,null,0,0)).scale.set(.81),s.name=r,s.inputEnabled=!0,s.events.onInputDown.add(R.onChoiceSkinSelect,i),i.addChild(s),6==o?(n=20,a+=R.hCard_H*s.scale.y+20):n+=R.wCard_H*s.scale.x+10}R.createWindowButton(.5*i.width,490,R.strings.ok,40,R.onChoiceSkinButtonOk,i,1,i);return i.addChild(i.selector),i},R.onChoiceSkinSelect=function(t,e){if(R.sfx.button&&R.sfx.button.play(),R.currentSkin!=t.name){var i=t.parent;i.selector.position.set(t.x+.5*t.width,t.y+.5*t.height),i.selector.scale.set(1.2),game.add.tween(i.selector.scale).to({x:1,y:1},100,Phaser.Easing.Linear.None,!0),R.currentSkin=t.name}},R.onChoiceSkinButtonOk=function(t){R.playerData.currentSkin!=R.currentSkin&&(R.playerData.currentSkin=R.currentSkin,R.saveGame(),R.deck.srcPlace&&R.deck.setSkin()),this.close()},R.PopupWindow=function(t,e,i,s){var n=new R.Window(!1,!1,e,i);n.addChild(R.createText(n.width/2,60,50,s.title,"#cba41b",!0,6));var a=R.createText(n.width/2,n.height/2-20,s.size?s.size:42,s.msg,"#cba41b",!0,4,!0);a.wordWrapWidth=n.width-60,n.addChild(a);R.createWindowButton(.5*n.width,490,s.btnOk?s.btnOk:R.strings.ok,s.size?s.size:40,t,n,1,n);return n},R.incentiviseTrigger=function(){PlayState.watchAdWindow.close(),sdkHandler.trigger("rewardedAd",{callback:function(t){t?PlayState.claimHintsWindow.open():PlayState.noMoreVideosWindow.open(),PlayState.setPause(!0)}},this)},R.AutoCompleteWindow=function(t,e){var i=new R.Window(!1,!1,t,e);i.addChild(R.createText(i.width/2,60,50,R.strings.auto_complete_title,"#cba41b",!0,6));var s=R.createText(i.width/2,i.height/2-20,48,R.strings.auto_complete_message,"#cba41b",!0,4,!0);s.wordWrapWidth=i.width-60,i.addChild(s);var n=R.createWindowButton(.5*i.width+200,460,R.strings.yes,40,R.onAutoCompleteWindowYes,i,1,i);R.createWindowButton(.5*i.width-200,n.y,R.strings.no,40,i.close,i,1,i);return i},R.onAutoCompleteWindowYes=function(t){R.cardsHiddenN=-101,this.close()},R.createCompleteWindow=function(t,e){var i=new R.Window(!0,!1,t,e);if(i.addChild(R.createText(.5*i.width,70,60,R.strings.congratulations,"#cba41b",!0,6)),i.addChild(R.createImage(.5*i.width-352.5,120,"ui","bg_popup_game_over",0,0)),R.score>R.playerData.score){var s=R.createText(.5*i.width,220,60,R.strings.new_best_score,"#cba41b",!0,6);690<s.width&&(s.fontSize*=690/s.width),i.addChild(s),i.addChild(R.createText(.5*i.width,290,60,R.score,"#ffffff",!0,6))}else{var n=R.createText(0,220,60,R.strings.your_score,"#cba41b",!0,6),a=R.createText(0,220,60,R.score,"#ffffff",!0,6);n.anchor.x=a.anchor.x=0;var o=n.width+60+a.width,r=.5*(i.width-o);n.x=r,a.x=r+n.width+60;var h=R.createText(0,290,50,R.strings.best_score,"#cba41b",!0,6),l=R.createText(0,290,50,R.playerData.score,"#ffffff",!0,6);h.anchor.x=l.anchor.x=0,o=h.width+50+l.width,r=.5*(i.width-o),h.x=r,l.x=r+h.width+50,i.addChild(n),i.addChild(a),i.addChild(h),i.addChild(l)}var d=R.createWindowButton(.5*i.width,470,R.strings.new_game,40,t,e,1,i);return d.visible=0,sdkHandler.trigger("beforePlayButtonDisplay",{callback:function(){d.visible=1}},this),i.open(),i},R.createNoMovesWindow=function(t,e){var i=new R.Window(!0,!1,t,e);i.addChild(R.createText(.5*i.width,70,60,R.strings.no_moves_title,"#cba41b",!0,6));var s=R.createText(.5*i.width,170,42,R.strings.no_moves_message,"#cba41b",!0,4,!0);s.wordWrapWidth=i.width-60,i.addChild(s);var n=R.createWindowButton(.5*i.width,300,R.strings.new_game,40,PlayState.newgame,PlayState,1,i),a=R.createWindowButton(n.x,n.y+90,R.strings.restart,40,PlayState.restart,PlayState,1,i);R.createWindowButton(n.x,a.y+90,R.strings.continue,40,i.close,i,1,i);return n.visible=0,a.visible=0,sdkHandler.trigger("beforePlayButtonDisplay",{callback:function(){n.visible=1,a.visible=1}}),i},R.FlyText=function(t,e){this.pool=[];for(var i=null,s=0;s<t;++s)(i=R.createText(0,0,e,"","#ffffff",!0,4)).flyText=this,i.update=R.flyTextUpdateLabel,game.world.remove(i),this.pool.push(i)},R.FlyText.prototype.constructor=R.FlyText,R.FlyText.prototype.launch=function(t,e,i){if(0!==this.pool.length){var s=this.pool.pop();s.text=i,s.position.set(t,e),game.world.add(s)}},R.FlyText.prototype.kill=function(t){t.alpha=1,game.world.remove(t),this.pool.push(t)},R.flyTextUpdateLabel=function(){this.y-=1,this.alpha-=.015,this.alpha<=0&&this.flyText.kill(this)},(R=R||{}).createText=function(t,e,i,s,n,a,o,r){return n=n||"#ffffff",label=game.add.text(t,e,s),label.font=R.fontName,label.anchor.set(.5),label.align="center",label.fontSize=i,label.fill=n,a&&(label.stroke="#000000",label.strokeThickness=o),r&&(label.wordWrap=!0,label.wordWrapWidth=game.width),label},R.createButton=function(t,e,i,s,n,a,o,r){var h=game.add.button(t,e,n,i,s,a,a,a+"_pushed",a);if(h.anchor.set(.5),R.sfx.button&&h.setDownSound(R.sfx.button),o){var l=R.createText(-2,-4,r,o,"#ffffff",!0,6);l.stroke="#000000",l.width>h.width-50&&(l.fontSize=Math.floor(r*((h.width-50)/l.width))),h.addChild(l),h.events.onInputDown.add(function(t){t.children[0].y=4,t.children[0].scale.set(.98)},h),h.events.onInputUp.add(function(t){t.children[0].y=-4,t.children[0].scale.set(1)},h)}return h},R.CheckButton=function(t,e,i,s,n,a,o){Phaser.Image.call(this,game,t,e,"ui","bg_swip"),this.anchor.set(0,.5),this.check=R.createImage(0,0,"ui","check_green",0,.5),this.checked=i;var r=R.createText(70,0,o,a,"#ffffff",!0,6);r.anchor.set(0,.5),r.align="left",this.inputEnabled=!0,this.events.onInputDown.add(this.onInputDown,this),this.events.onInputDown.add(s,n),this.addChild(this.check),this.addChild(r),this.setCheck(i)},R.CheckButton.prototype=Object.create(Phaser.Image.prototype),R.CheckButton.prototype.constructor=R.CheckButton,R.CheckButton.prototype.setCheck=function(t){this.checked=t,this.check.x=t?27:2,this.check.frameName=t?"check_green":"check_grey"},R.CheckButton.prototype.onInputDown=function(){R.sfx.button&&R.sfx.button.play(),this.setCheck(!this.checked)},R.Window=function(t,e,i,s){t&&(this.bitmap=game.add.bitmapData(R.bmdSize,R.bmdSize),this.bitmap.ctx.beginPath(),this.bitmap.ctx.rect(0,0,R.bmdSize,R.bmdSize),this.bitmap.ctx.fillStyle="#000000",this.bitmap.ctx.fill(),this.curtain=game.add.image(0,0,this.bitmap,null),this.curtain.events.onDestroy.add(this.shutdown,this),e||(this.curtain.exists=!1,game.world.remove(this.curtain))),Phaser.Image.call(this,game,0,0,"ui","bg_popup"),e?(game.world.add(this),this.resize(game.width,game.height)):this.exists=!1,this.buttons=[];var n=this.createButton(825,37,this.close,this,"ui","btn_close",null);game.device.desktop||(n.hitArea=new Phaser.Rectangle(-60,-60,120,120)),this.onCloseCallback=i,this.onCloseCallbackContext=s,this.tween=null},R.Window.prototype=Object.create(Phaser.Image.prototype),R.Window.prototype.constructor=R.Window,R.Window.prototype.shutdown=function(){this.bitmap.destroy()},R.Window.prototype.resize=function(t,e){this.curtain&&(this.curtain.bringToTop(),this.curtain.scale.set(t/R.bmdSize,e/R.bmdSize)),this.position.set(.5*(t-859),.5*(e-554)),this.tween&&this.tween.isRunning&&(this.tween.stop(!0),this.tween=null),this.bringToTop()},R.Window.prototype.open=function(){this.curtain&&(this.curtain.exists=!0,game.world.add(this.curtain)),this.exists=!0,game.world.add(this),this.resize(game.width,game.height),this.buttonsEnabled(!1);var t=this.x;this.x=-this.width,this.tween=game.add.tween(this).to({x:t},200,Phaser.Easing.Linear.None,!0),this.tween.onComplete.add(function(){this.buttonsEnabled(!0)},this),this.curtain&&(this.curtain.alpha=0,game.add.tween(this.curtain).to({alpha:.8},200,Phaser.Easing.Linear.None,!0)),R.sfx.dlg&&R.sfx.dlg.play()},R.Window.prototype.close=function(){this.buttonsEnabled(!1),this.tween=game.add.tween(this).to({x:-this.width},200,Phaser.Easing.Linear.None,!0),this.tween.onComplete.add(this.onCloseComplete,this),this.curtain&&game.add.tween(this.curtain).to({alpha:0},200,Phaser.Easing.Linear.None,!0),R.sfx.dlg&&R.sfx.dlg.play()},R.Window.prototype.onCloseComplete=function(){this.curtain&&(this.curtain.exists=!1,game.world.remove(this.curtain)),this.exists=!1,game.world.remove(this),this.tween=null,this.onCloseCallback&&this.onCloseCallback.call(this.onCloseCallbackContext)},R.Window.prototype.buttonsEnabled=function(t){for(var e=this.buttons.length;e--;)this.buttons[e].inputEnabled=t;this.tween=null},R.Window.prototype.createButton=function(t,e,i,s,n,a,o,r){var h=R.createButton(t,e,i,s,n,a,o,r);return this.addChild(h),this.buttons.push(h),h},(R=R||{}).bitmapData=null,R.bmdSize=10,R.sceneTransition=function(t,e){R.bitmapData||(R.bitmapData=game.add.bitmapData(R.bmdSize,R.bmdSize),R.bitmapData.ctx.beginPath(),R.bitmapData.ctx.rect(0,0,R.bmdSize,R.bmdSize),R.bitmapData.ctx.fillStyle="#003720",R.bitmapData.ctx.fill());var i=game.add.sprite(0,0,R.bitmapData);i.scale.set(game.width/R.bmdSize,game.height/R.bmdSize),e&&(i.alpha=0),game.add.tween(i).to({alpha:1-i.alpha},t,Phaser.Easing.Linear.None,!0).onComplete.add(function(){if(e)game.state.start(e);else{i.destroy();var t=game.state.getCurrentState();"start"in t&&"function"==typeof t.start&&t.start()}})},(R=R||{}).shd=7,R.Shadow=function(){var t=game.add.graphics(0,0);t.lineStyle(0),this.distance=0,this.gfx=t,this.card=null},R.Shadow.prototype={setPosition:function(t){this.gfx.position.set(t.x+this.distance,t.y+this.distance)},cast:function(t){var e=this.gfx;e.clear(),e.beginFill(0,.25),e.drawRoundedRect(0,0,R.wCard,t.getBottomCard().y-t.y+R.hCard,5),e.endFill(),e.visible=!0,this.distance=2,this.card=t,game.world.bringToTop(e)},move:function(t){this.distance<R.shd&&(this.distance+=2,this.distance>R.shd&&(this.distance=R.shd)),this.setPosition(t)},hiding:function(){2<this.distance?(this.distance-=2,this.distance<2&&(this.distance=2),this.setPosition(this.card)):(this.card=null,this.gfx.visible=!1)}},R.Shadow.prototype.constructor=R.Shadow,(R=R||{}).solver={solve:function(){for(var t=R.deck.columns,e=[],i=[],s=[],n=null,a=-1,o=0;o<R.deck.cards.length;++o)(n=R.deck.cards[o]).open(!0,!1),game.world.add(n),12===n.vi?e.push(n):i.push(n);for(R.deck.srcPlace.visible=!1,R.deck.cards.length=0;0<R.deck.pile.length;)R.deck.removeStock();for(var o in t)for(n=t[o].topCard;n;)12===n.vi?e.push(n):i.push(n),t[o].remove(n),n.over=null,n=t[o].topCard;for(var o in e)for(s.push([]),s[o].push(e[o]),a=e[o].si,vi=e[o].vi;vi--;){if(!(n=this.findCard(i,a,vi)))return void console.log("error");s[o].push(n)}var r=0,h=0;for(var o in s){for(r=0;r<13;)t[o].easyAddOne(s[o][r]),++r;t[o].setPosition(t[o].x,t[o].y),game.time.events.add(h,PlayState.move,PlayState),game.time.events.add(h,R.deck.isAllSorted,R.deck,t[o].topCard),h+=1350}},findCard:function(t,e,i){for(var s=t.length;s--;)if(t[s].si===e&&t[s].vi===i){var n=t[s];return t.splice(s,1),n}return null}},R.Hints=function(){this.movies=[],this.idxMovies=-1,this.prevMoves=-1},R.Hints.prototype={hint:function(){if(this.prevMoves<R.moves&&(this.getAllPossibleMovies(),this.prevMoves=R.moves,this.idxMovies=0),0<this.movies.length){var t=this.movies[this.idxMovies][0],e=this.movies[this.idxMovies][1];if(t){for(;t;)R.deck.markHint(t),t=t.over;R.deck.timeEventHint=game.time.events.add(500,R.deck.markHint,R.deck,e,!0),R.unlockHint=!1,game.time.events.add(800,function(){R.unlockHint=!0},this)}else e?R.deck.markHint(e):R.deck.markHint(R.deck.srcPlace);++this.idxMovies===this.movies.length&&(this.idxMovies=0)}else PlayState.noMoves()},getAllPossibleMovies:function(){var t=R.deck.columns,e=null,i=null,s=0;for(s=0;s<10;++s)t[s].countSorted();for(var n=this.movies.length=0;n<10;++n)for(e=t[n].getMostBottomSortedCard();e;){for(s=0;s<10;++s)s!==n&&t[s].checkCard(e)&&(i=t[s].topCard,(!e.under&&i||e.under&&!e.under.isOpen||e.under&&e.vi+1!==e.under.vi||i&&e.under&&e.si===i.si&&e.si!==e.under.si||i&&e.si===i.si&&e.column.untilRown<i.column.untilRown)&&this.movies.push([e,i||R.deck.cardPlaces[s]]));e=e.over}1<this.movies.length&&this.movies.sort(this.sort),0<R.deck.cards.length&&(-1===(n=R.deck.emptyColumnIdx())?this.movies.push([null,null]):this.movies.push([null,R.deck.cardPlaces[n]]))},sort:function(t,e){var i=t[0],s=e[0],n=t[1],a=e[1];return"e"!=n.name&&"e"!=a.name?s.si===a.si?i.si===n.si?a.column.rown===n.column.rown?s.column.rown>i.column.rown?1:s.vi-i.vi:a.column.rown-n.column.rown:1:i.si===n.si?-1:s.under&&!s.under.isOpen?i.under&&!i.under.isOpen?s.vi-i.vi:1:i.under&&!i.under.isOpen?-1:0:s.column.untilRown-i.column.untilRown}},R.Hints.prototype.constructor=R.Hints,(R=R||{}).waGroup=null,R.WinAnimatorMoveFoundations=function(t,e,i){R.waGroup=game.add.group();for(var s=R.deck.columns,n=R.deck.foundations,a=0,o=null,r=game.width>game.height?1:-1,h=8;h--;)a+=200,R.waGroup.addAt(n[h].pile[12],0),o=game.add.tween(n[h].pile[12]).to({x:s[i].x,y:s[i].y},500,Phaser.Easing.Linear.None,!0,a),R.sfx.cardmove&&o.onStart.add(function(){R.sfx.cardmove.play()},this),i+=r;o.onComplete.add(R.WinAnimatorAdjustFoundation,R),o.onComplete.add(t,e),R.sfx.vic&&R.sfx.vic.play()},R.WinAnimatorAdjustFoundation=function(){for(var t=R.deck.foundations,e=0;e<8;++e)t[e].setPosition(t[e].lastCard.x,t[e].lastCard.y)},R.WinAnimator1={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?2:9)},prepare:function(){for(var t=R.deck.foundations,e=null,i=0,s=0,n=8,a=0;n--;){for(a=13;a--;)e=t[n].pile[a],game.time.events.add(i,this.start,e),0<a&&(e.under=t[n].pile[a-1]),i+=500;t[n].pile.length=0,i=s+=100}},start:function(){this.vY=-game.rnd.realInRange(1,3),this.vX=-game.rnd.realInRange(1,1.5),this.anchor.x=.5,this.x+=.5*this.width,this.under&&R.waGroup.addAt(this.under,0),R.waGroup.addAt(this,0),this.update=R.WinAnimator1.update,R.sfx.cardselect&&R.sfx.cardselect.play()},update:function(){this.x+=this.vX,this.y+=this.vY,this.vY+=.1;var t=this.y+this.height*this.scale.y;if(t>game.height){if(this.scale.y=(this.height*this.scale.y-t+game.height)/this.height,this.scale.y<.5*R.scaleCard){for(var e=game.device.desktop?1*this.vi+1:1;e--;)new R.ParticleSuit(this);R.waGroup.remove(this,!0),R.sfx.card&&R.sfx.card.play(),R.sfx.piano&&!R.sfx.piano.isPlaying&&R.sfx.piano.play()}this.scale.x=2*R.scaleCard-this.scale.y}}},R.WinAnimator2={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=0,s=8;s--;)(e=t[s].pile.pop()).under=t[s].pile,game.time.events.add(i,this.start,e),i+=4e3,R.waGroup.remove(e,!1);PlayState.backgroundVisible(!1)},start:function(){this.vY=-game.rnd.realInRange(4,8),this.vX=game.rnd.realInRange(2,4),1===game.rnd.between(0,1)&&(this.vX=-this.vX),this.anchor.x=.5,this.x+=.5*this.width,R.waGroup.addAt(this,0),this.update=R.WinAnimator2.update,R.sfx.cardmove&&R.sfx.cardmove.play()},update:function(){this.x+=this.vX,this.y+=this.vY;var t=.5*this.width;if(this.x-t>game.width||this.x+t<0){if(0<this.under.length){var e=this.under.pop();e.under=this.under,R.WinAnimator2.start.call(e)}R.waGroup.remove(this,!0)}else{this.vY+=.4,this.y+this.height>game.height&&(this.y=game.height-this.height,this.vY=.9*-this.vY,R.sfx.cardmove&&R.sfx.cardmove.play())}}},R.WinAnimator3={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=0,s=8;s--;)(e=t[s].pile.pop()).under=t[s].pile,game.time.events.add(i,this.start,e),i+=1e3,R.waGroup.remove(e,!1);PlayState.backgroundVisible(!1)},start:function(){this.vY=-game.rnd.realInRange(4,8),this.vX=game.rnd.realInRange(4,6),this.vR=.05,1===game.rnd.between(0,1)&&(this.vX=-this.vX,this.vR=-this.vR),this.anchor.set(.5),this.x+=.5*this.width,this.y+=.5*this.height,R.waGroup.addAt(this,0),this.update=R.WinAnimator3.update,R.sfx.cardmove&&R.sfx.cardmove.play()},update:function(){if(this.x+=this.vX,this.y+=this.vY,this.rotation+=this.vR,this.x-this.height>game.width||this.x+this.height<0){if(0<this.under.length){var t=this.under.pop();t.under=this.under,R.WinAnimator3.start.call(t)}R.waGroup.remove(this,!0)}else this.vY+=.4,this.y>game.height&&(this.y=game.height,this.vY=.9*-this.vY,R.sfx.cardmove&&R.sfx.cardmove.play())}},R.WinAnimator4={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=0,s=8,n=0;s--;){for(n=13,i=0;n--;)e=t[s].pile[n],game.time.events.add(i,this.start,e),i+=50;t[s].pile.length=0}},start:function(){this.vY=-2,this.vX=game.width>game.height?-6:4,this.jumps=0,R.waGroup.addAt(this,0),this.update=R.WinAnimator4.update,R.sfx.cardmove&&R.sfx.cardmove.play()},update:function(){this.x+=this.vX,this.y+=this.vY,this.vY+=.6,this.y+this.height>game.height&&(this.y=game.height-this.height,this.vY=.9*-this.vY,Math.abs(this.vY)<15&&(this.vY*=2,3==++this.jumps&&game.add.tween(this).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0).onComplete.add(function(){R.waGroup.remove(this,!0)},this)),this.scale.set(this.scale.x-.01)),this.x<0?(this.x=0,this.vX=-this.vX):this.x+this.width>game.width&&(this.x=game.width-this.width,this.vX=-this.vX)}},R.WinAnimator5={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=8;i--;)(e=t[i].pile.pop()).under=t[i].pile,R.waGroup.add(e),game.time.events.add(500*game.rnd.realInRange(0,2),this.start,e)},start:function(){if(this.vY=game.rnd.realInRange(.5,2),this.vX=game.rnd.realInRange(1,4),this.ds=game.rnd.realInRange(.01,.06),this.dsx=game.rnd.between(0,1),this.g=game.rnd.realInRange(.005,.07),this.os=this.scale.x,this.cs=this.os,this.vR=.04,game.rnd.between(0,1)&&(this.vX=-this.vX,this.vR=-this.vR),this.anchor.set(.5),this.x+=.5*this.width,this.y+=.5*this.height,0<this.under.length){var t=this.under.pop();t.under=this.under,R.waGroup.addAt(t,0),game.time.events.add(500*game.rnd.realInRange(0,2),R.WinAnimator5.start,t)}this.update=R.WinAnimator5.update,R.sfx.cardmove&&R.sfx.cardmove.play()},update:function(){this.x+=this.vX,this.y+=this.vY,this.rotation+=this.vR,this.vY+=this.g,this.cs-=this.ds,this.cs<=0?(this.ds=-this.ds,this.cs<0&&(this.cs=-this.cs),this.isOpen=!this.isOpen,this.loadTexture(this.isOpen?this.name:R.currentSkin)):this.cs>=this.os&&(this.ds=-this.ds,this.cs=2*this.os-this.cs),this.dsx?this.scale.x=this.cs*R.scaleCard:this.scale.y=this.cs*R.scaleCard,this.x<0?(this.x=0,this.vX=-this.vX):this.x>game.width&&(this.x=game.width,this.vX=-this.vX),this.y-R.hCard>game.height&&R.waGroup.remove(this,!0)}},R.WinAnimator6={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=game.width>game.height?7:0,s=game.width>game.height?-2:2,n=game.width>game.height?-1:1;1==n&&i<8||-1==n&&0<i;)(e=t[i].pile.pop()).under=t[i].pile,e.over=t[i+n].pile.pop(),e.over.under=t[i+n].pile,game.time.events.add(200,this.start,e),R.waGroup.add(e),R.waGroup.add(e.over),i+=s},start:function(){this.anchor.set(.99,.5),this.x+=this.width*this.anchor.x,this.y+=.5*this.height,this.tween=0,this.fx=1;var t=this.over;t.anchor.set(1-this.anchor.x,.5),t.x+=t.width*t.anchor.x,t.y+=.5*t.height;var e=.5*(t.x-this.x)+this.x;game.add.tween(this).to({x:e},200,Phaser.Easing.Linear.None,!0),game.add.tween(t).to({x:e},200,Phaser.Easing.Linear.None,!0);var i=game.rnd.realInRange(.4*R.scaleCard,.8*R.scaleCard);if(game.add.tween(t.scale).to({x:i,y:i},200,Phaser.Easing.Linear.None,!0),game.add.tween(this.scale).to({x:i,y:i},200,Phaser.Easing.Linear.None,!0).onComplete.add(R.WinAnimator6.flitter,this),0<this.under.length){var s=this.under.pop();s.under=this.under,s.over=t.under.pop(),s.over.under=t.under,R.waGroup.addAt(s,0),R.waGroup.addAt(s.over,0),this.tween2=s}R.sfx.cardmove&&R.sfx.cardmove.play()},flitter:function(){var t=100*game.rnd.realInRange(1,3);game.add.tween(this.scale).to({x:.2*this.scale.x},t,Phaser.Easing.Linear.None,!0,0,-1,!0),game.add.tween(this.over.scale).to({x:.2*this.scale.x},t,Phaser.Easing.Linear.None,!0,0,-1,!0),R.WinAnimator6.moveTo.call(this)},moveTo:function(t){var e=null;if(1===this.tween&&this.tween2&&R.WinAnimator6.start.call(this.tween2),++this.tween<3){var i={x:game.rnd.between(0,game.width),y:game.rnd.between(R.deck.columns[0].y+1.5*R.hCard,game.height),rotation:game.rnd.realInRange(-Math.PI,Math.PI)},s=(t=100*game.rnd.realInRange(1,10),Phaser.Point.distance(this,i)/.5);game.add.tween(this.over).to(i,s,Phaser.Easing.Quadratic.InOut,!0,t),(e=game.add.tween(this).to(i,s,Phaser.Easing.Quadratic.InOut,!0,t)).onComplete.add(R.WinAnimator6.moveTo,this)}else{i={x:this.x<R.halfGameWidth?-R.hCard:game.width+R.hCard,y:game.height+R.hCard,rotation:game.rnd.realInRange(-Math.PI,Math.PI)},t=100*game.rnd.realInRange(1,10),s=Phaser.Point.distance(this,i)/.5;game.add.tween(this.over).to(i,s,Phaser.Easing.Quadratic.In,!0,t),(e=game.add.tween(this).to(i,s,Phaser.Easing.Quadratic.In,!0,t)).onComplete.add(R.WinAnimator6.destroy,this)}e.onUpdateCallback(R.WinAnimator6.fxFire,this)},fxFire:function(){game.device.desktop||(this.fx=1-this.fx),1===this.fx&&this.parent===R.waGroup&&new R.ParticlePlume(this)},destroy:function(){R.waGroup.remove(this.over,!0),R.waGroup.remove(this,!0)}},R.winAnimator7Colors=[13615407,9193382,1503957,13594415,15965763,3467371,16119273,3486392,16579982,1334214,12393024,15990545,6561740],R.WinAnimator7={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=8,s=0;i--;)(e=t[i].pile.pop()).under=t[i].pile,R.waGroup.add(e),game.time.events.add(s,this.start,e),s+=1e3},start:function(){if(this.vY=-4,this.vX=game.rnd.realInRange(-2,2),this.vR=0,this.aR=.004,this.vX<0&&(this.aR=-this.aR),this.anchor.set(.5),this.x+=.5*this.width,this.y+=.5*this.height,0<this.under.length){var t=this.under.pop();t.under=this.under,R.waGroup.addAt(t,0),this.over=t}game.device.desktop?R.WinAnimator7.tweenTint(this,16777215,game.rnd.pick(R.winAnimator7Colors),2e3):this.tint=game.rnd.pick(R.winAnimator7Colors),this.update=R.WinAnimator7.update,R.sfx.cardmove&&R.sfx.cardmove.play()},update:function(){if(this.x+=this.vX,this.y+=this.vY,this.rotation+=this.vR,this.vY+=.1,this.vR+=this.aR,this.y>R.halfGameHeight){this.over&&R.WinAnimator7.start.call(this.over),R.waGroup.remove(this,!0),new R.ParticleFirework(this.x,this.y,this.tint,game.device.desktop?100:20);var t=R.sfx["fw"+game.rnd.between(1,4)];t&&t.play()}},tweenTint:function(t,e,i,s){var n={step:0},a=game.add.tween(n).to({step:100},s);a.onUpdateCallback(function(){t.tint=Phaser.Color.interpolateColor(e,i,100,n.step)}),t.tint=e,a.start()}},R.winAnimator8ScaleH=.4,R.WinAnimator8={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8)},prepare:function(){for(var t=R.deck.foundations,e=null,i=200,s=game.width>game.height?7:0,n=game.width>game.height?-2:2,a=game.width>game.height?-1:1;1==a&&s<8||-1==a&&0<s;)(e=t[s].pile.pop()).under=t[s].pile,e.over=t[s+a].pile,game.time.events.add(i,this.start,e),R.waGroup.add(e),s+=n,i+=1e3;e.lastCard=!0},start:function(){this.tween=game.cache.getJSON("sword"),this.tween2=0,this.anchor.set(.5),this.x+=.5*this.width,this.y+=.5*this.height;var t=.5*(this.over[this.over.length-1].x-this.x+.5*this.width)+this.x,e=R.winAnimator8ScaleH*R.scaleCard;game.add.tween(this.scale).to({x:e,y:e},500,Phaser.Easing.Quadratic.Out,!0),game.add.tween(this).to({x:t,y:game.height-180},500,Phaser.Easing.Quadratic.Out,!0).onComplete.add(R.WinAnimator8.buildSword,this),R.waGroup.addAt(this.under[11],0),R.sfx.cardmove&&R.sfx.cardmove.play()},buildSword:function(){var t=this.tween[this.tween2],e={x:t.x-.5*this.width/this.scale.x,y:t.y-.5*this.height/this.scale.y,angle:t.a},i=this.tween2%2?this.under:this.over,s=i.pop();++this.tween2,s.anchor.set(.5),s.x+=.5*s.width,s.y+=.5*s.height,s.x-=this.x,s.y-=this.y,s.x/=this.scale.x,s.y/=this.scale.y,s.scale.set(R.scaleCard/this.scale.x),this.addChild(s),game.add.tween(s.scale).to({x:1,y:1},600,Phaser.Easing.Quadratic.InOut,!0);var n=game.add.tween(s).to(e,600,Phaser.Easing.Quadratic.InOut,!0);0<i.length&&(R.waGroup.add(i[i.length-1]),this.bringToTop()),this.tween2<25?game.time.events.add(300,R.WinAnimator8.buildSword,this):this.lastCard&&n.onComplete.add(R.WinAnimator8.startSwing,this)},startSwing:function(){for(var t=-1,e=null,i=0;i<R.waGroup.total;++i)e=R.waGroup.getAt(i),game.add.tween(e).to({rotation:.4*t},500,Phaser.Easing.Quadratic.Out,!0,500).onComplete.add(R.WinAnimator8.hit,e),t=-t},hit:function(){var t=.6;0<this.rotation&&(t=-t),game.add.tween(this).to({rotation:t},200,Phaser.Easing.Quadratic.In,!0,200).onComplete.add(R.WinAnimator8.startDisperse,this)},startDisperse:function(){var t=this.getChildAt(13).world;new R.ParticleFirework(t.x,t.y,40191,game.device.desktop?50:10),this.tween=game.time.events.loop(50,R.WinAnimator8.disperse,this);var e=R.sfx["fw"+game.rnd.between(1,4)];e&&e.play()},disperse:function(){if(0<this.children.length){var t=this.getChildAt(this.children.length-1),e=t.world.x,i=t.world.y;R.waGroup.add(t),t.scale.set(this.scale.x),t.position.set(e,i),t.rotation+=this.rotation,t.under=[],R.WinAnimator5.start.call(t)}else game.time.events.remove(this.tween),this.under=[],R.WinAnimator5.start.call(this)}},R.winAnimator9Path1={x:[360,156,58,156,537,646,537,253,362,454,360,360],y:[360,297,396,486,297,386,486,142,74,142,287,601],ss:.6,se:1},R.winAnimator9PathScaleStart=1,R.winAnimator9PathScaleEnd=1,R.winAnimator9Path=null,R.WinAnimator9={init:function(){R.WinAnimatorMoveFoundations(this.prepare,this,game.width>game.height?1:8),R.winAnimator9Path=R.winAnimator9Path1},prepare:function(){R.winAnimator9PathScaleStart=R.scaleCard*R.winAnimator9Path.ss,R.winAnimator9PathScaleEnd=R.winAnimator9PathScaleStart*R.winAnimator9Path.se;for(var t=R.deck.foundations,e=null,i=8,s=200;i--;)(e=t[i].pile.pop()).under=t[i].pile,R.waGroup.add(e),game.time.events.add(s,this.start,e),s+=1300},start:function(){this.t=0;var t=R.winAnimator9Path.x[0]+.5*(game.width-720),e=R.winAnimator9Path.y[0]+.5*(game.height-720),i=R.winAnimator9PathScaleStart;this.anchor.set(.5),this.x+=.5*this.width,this.y+=.5*this.height,game.time.events.add(200,R.WinAnimator9.followPath,this);var s=new Phaser.Point(R.winAnimator9Path.x[0],R.winAnimator9Path.y[0]),n=new Phaser.Point(R.winAnimator9Path.x[1],R.winAnimator9Path.y[1]),a=game.math.angleBetweenPoints(s,n);if(game.add.tween(this.scale).to({x:i,y:i},200,Phaser.Easing.Linear.None,!0).onComplete.add(R.WinAnimator9.followPath,this),game.add.tween(this).to({x:t,y:e,rotation:a},200,Phaser.Easing.Linear.None,!0).onComplete.add(R.WinAnimator9.followPath,this),0<this.under.length){var o=this.under.pop();o.under=this.under,R.waGroup.addAt(o,0),game.time.events.add(100,R.WinAnimator9.start,o)}this.bringToTop(),R.sfx.cardmove&&R.sfx.cardmove.play()},followPath:function(){this.update=R.WinAnimator9.update},update:function(){var t=this.t,e=game.math.catmullRomInterpolation(R.winAnimator9Path.x,t)+.5*(game.width-720),i=game.math.catmullRomInterpolation(R.winAnimator9Path.y,t)+.5*(game.height-720);if(this.rotation=game.math.angleBetweenPoints(this,{x:e,y:i}),this.x=e,this.y=i,this.scale.set(R.winAnimator9PathScaleStart*(1-t)+R.winAnimator9PathScaleEnd*t),this.t+=.002,1<=this.t){this.under=[],R.WinAnimator5.start.call(this),new R.ParticleFirework(this.x,this.y,40191,game.device.desktop?6:2);var s=R.sfx["fw"+game.rnd.between(1,4)];s&&s.play()}}},R.winAnimator10Path1={x:[352,163,83,82,125,220,360,492,579,598,551,462,348,289,264,292,364,439,469,479,466,433,384,348,343,374],y:[30,144,305,438,544,631,671,635,543,420,306,258,266,319,399,476,520,498,467,424,381,355,352,381,417,438],ss:.5,se:.3},R.WinAnimator10={init:function(){R.WinAnimatorMoveFoundations(R.WinAnimator9.prepare,R.WinAnimator9,game.width>game.height?1:8),R.winAnimator9Path=R.winAnimator10Path1}},R.winAnimator11Path1={x:[528,318,178,139,185,318,494,557,494,318,223,188,225,325,470,509,445,318,235,325,462,410,309,284,329,413,363],y:[105,179,153,102,51,32,95,195,317,375,361,319,276,263,317,400,494,522,478,439,526,601,612,588,566,615,656],ss:.5,se:.3},R.WinAnimator11={init:function(){R.WinAnimatorMoveFoundations(R.WinAnimator9.prepare,R.WinAnimator9,game.width>game.height?1:8),R.winAnimator9Path=R.winAnimator11Path1}};