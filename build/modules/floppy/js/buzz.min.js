!function(t,n,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof n.define&&n.define.amd?define(t,[],e):n[t]=e()}("buzz",this,function(){var f={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80,document:document},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(t,n){function e(t){for(var n=[],e=t.length-1,i=0;i<=e;i++)n.push({start:t.start(i),end:t.end(i)});return n}function i(t){return t.split(".").pop()}function u(t,n){var e=r.createElement("source");e.src=n,f.types[i(n)]&&(e.type=f.types[i(n)]),t.appendChild(e)}var r=(n=n||{}).document||f.defaults.document,s=0,o=[],a={},h=f.isSupported();if(this.load=function(){return h&&this.sound.load(),this},this.play=function(){return h&&this.sound.play(),this},this.togglePlay=function(){return h&&(this.sound.paused?this.sound.play():this.sound.pause()),this},this.pause=function(){return h&&this.sound.pause(),this},this.isPaused=function(){return h?this.sound.paused:null},this.stop=function(){return h&&(this.setTime(0),this.sound.pause()),this},this.isEnded=function(){return h?this.sound.ended:null},this.loop=function(){return h&&(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()})),this},this.unloop=function(){return h&&(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop")),this},this.mute=function(){return h&&(this.sound.muted=!0),this},this.unmute=function(){return h&&(this.sound.muted=!1),this},this.toggleMute=function(){return h&&(this.sound.muted=!this.sound.muted),this},this.isMuted=function(){return h?this.sound.muted:null},this.setVolume=function(t){return h&&(t<0&&(t=0),100<t&&(t=100),this.volume=t,this.sound.volume=t/100),this},this.getVolume=function(){return h?this.volume:this},this.increaseVolume=function(t){return this.setVolume(this.volume+(t||1))},this.decreaseVolume=function(t){return this.setVolume(this.volume-(t||1))},this.setTime=function(t){if(!h)return this;var n=!0;return this.whenReady(function(){!0===n&&(n=!1,this.sound.currentTime=t)}),this},this.getTime=function(){if(!h)return null;var t=Math.round(100*this.sound.currentTime)/100;return isNaN(t)?f.defaults.placeholder:t},this.setPercent=function(t){return h?this.setTime(f.fromPercent(t,this.sound.duration)):this},this.getPercent=function(){if(!h)return null;var t=Math.round(f.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(t)?f.defaults.placeholder:t},this.setSpeed=function(t){return h&&(this.sound.playbackRate=t),this},this.getSpeed=function(){return h?this.sound.playbackRate:null},this.getDuration=function(){if(!h)return null;var t=Math.round(100*this.sound.duration)/100;return isNaN(t)?f.defaults.placeholder:t},this.getPlayed=function(){return h?e(this.sound.played):null},this.getBuffered=function(){return h?e(this.sound.buffered):null},this.getSeekable=function(){return h?e(this.sound.seekable):null},this.getErrorCode=function(){return h&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!h)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return h?this.sound.readyState:null},this.getStateMessage=function(){if(!h)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return h?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!h)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(t,n){return h&&(this.sound[t]=n),this},this.get=function(t){return h?t?this.sound[t]:this.sound:null},this.bind=function(t,n){if(!h)return this;t=t.split(" ");function e(t){n.call(i,t)}for(var i=this,u=0;t.length>u;u++){var s=t[u],r=s;s=r.split(".")[0],o.push({idx:r,func:e}),this.sound.addEventListener(s,e,!0)}return this},this.unbind=function(t){if(!h)return this;t=t.split(" ");for(var n=0;t.length>n;n++)for(var e=t[n],i=e.split(".")[0],u=0;o.length>u;u++){var s=o[u].idx.split(".");(o[u].idx==e||s[1]&&s[1]==e.replace(".",""))&&(this.sound.removeEventListener(i,o[u].func,!0),o.splice(u,1))}return this},this.bindOnce=function(t,n){if(!h)return this;var e=this;return a[s++]=!1,this.bind(t+"."+s,function(){a[s]||(a[s]=!0,n.call(e)),e.unbind(t+"."+s)}),this},this.trigger=function(t){if(!h)return this;t=t.split(" ");for(var n=0;t.length>n;n++)for(var e=t[n],i=0;o.length>i;i++){var u=o[i].idx.split(".");if(o[i].idx==e||u[0]&&u[0]==e.replace(".","")){var s=r.createEvent("HTMLEvents");s.initEvent(u[0],!1,!0),this.sound.dispatchEvent(s)}}return this},this.fadeTo=function(n,t,e){if(!h)return this;t=t instanceof Function?(e=t,f.defaults.duration):t||f.defaults.duration;var i=this.volume,u=t/Math.abs(i-n),s=this;return this.play(),this.whenReady(function(){!function t(){setTimeout(function(){i<n&&n>s.volume?(s.setVolume(s.volume+=1),t()):n<i&&s.volume>n?(s.setVolume(s.volume-=1),t()):e instanceof Function&&e.apply(s)},u)}()}),this},this.fadeIn=function(t,n){return h?this.setVolume(0).fadeTo(100,t,n):this},this.fadeOut=function(t,n){return h?this.fadeTo(0,t,n):this},this.fadeWith=function(t,n){return h&&(this.fadeOut(n,function(){this.stop()}),t.play().fadeIn(n)),this},this.whenReady=function(t){if(!h)return null;var n=this;0===this.sound.readyState?this.bind("canplay.buzzwhenready",function(){t.call(n)}):t.call(n)},h&&t){for(var l in f.defaults)f.defaults.hasOwnProperty(l)&&(n[l]=n[l]||f.defaults[l]);if(this.sound=r.createElement("audio"),t instanceof Array)for(var d in t)t.hasOwnProperty(d)&&u(this.sound,t[d]);else if(n.formats.length)for(var c in n.formats)n.formats.hasOwnProperty(c)&&u(this.sound,t+"."+n.formats[c]);else u(this.sound,t);n.loop&&this.loop(),n.autoplay&&(this.sound.autoplay="autoplay"),this.sound.preload=!0===n.preload?"auto":!1===n.preload?"none":n.preload,this.setVolume(n.volume),f.sounds.push(this)}},group:function(i){function u(){for(var t=s(null,arguments),n=t.shift(),e=0;i.length>e;e++)i[e][n].apply(i[e],t)}function s(t,n){return t instanceof Array?t:Array.prototype.slice.call(n)}i=s(i,arguments),this.getSounds=function(){return i},this.add=function(t){t=s(t,arguments);for(var n=0;t.length>n;n++)i.push(t[n])},this.remove=function(t){t=s(t,arguments);for(var n=0;t.length>n;n++)for(var e=0;i.length>e;e++)if(i[e]==t[n]){i.splice(e,1);break}},this.load=function(){return u("load"),this},this.play=function(){return u("play"),this},this.togglePlay=function(){return u("togglePlay"),this},this.pause=function(t){return u("pause",t),this},this.stop=function(){return u("stop"),this},this.mute=function(){return u("mute"),this},this.unmute=function(){return u("unmute"),this},this.toggleMute=function(){return u("toggleMute"),this},this.setVolume=function(t){return u("setVolume",t),this},this.increaseVolume=function(t){return u("increaseVolume",t),this},this.decreaseVolume=function(t){return u("decreaseVolume",t),this},this.loop=function(){return u("loop"),this},this.unloop=function(){return u("unloop"),this},this.setTime=function(t){return u("setTime",t),this},this.set=function(t,n){return u("set",t,n),this},this.bind=function(t,n){return u("bind",t,n),this},this.unbind=function(t){return u("unbind",t),this},this.bindOnce=function(t,n){return u("bindOnce",t,n),this},this.trigger=function(t){return u("trigger",t),this},this.fade=function(t,n,e,i){return u("fade",t,n,e,i),this},this.fadeIn=function(t,n){return u("fadeIn",t,n),this},this.fadeOut=function(t,n){return u("fadeOut",t,n),this}},all:function(){return new f.group(f.sounds)},isSupported:function(){return!!f.el.canPlayType},isOGGSupported:function(){return!!f.el.canPlayType&&f.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!f.el.canPlayType&&f.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!f.el.canPlayType&&f.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!f.el.canPlayType&&(f.el.canPlayType("audio/x-m4a;")||f.el.canPlayType("audio/aac;"))},toTimer:function(t,n){var e,i,u;return e=Math.floor(t/3600),e=isNaN(e)?"--":10<=e?e:"0"+e,i=n?Math.floor(t/60%60):Math.floor(t/60),i=isNaN(i)?"--":10<=i?i:"0"+i,u=Math.floor(t%60),u=isNaN(u)?"--":10<=u?u:"0"+u,n?e+":"+i+":"+u:i+":"+u},fromTimer:function(t){var n=(""+t).split(":");return n&&3==n.length&&(t=3600*parseInt(n[0],10)+60*parseInt(n[1],10)+parseInt(n[2],10)),n&&2==n.length&&(t=60*parseInt(n[0],10)+parseInt(n[1],10)),t},toPercent:function(t,n,e){var i=Math.pow(10,e||0);return Math.round(100*t/n*i)/i},fromPercent:function(t,n,e){var i=Math.pow(10,e||0);return Math.round(n/100*t*i)/i}};return f});